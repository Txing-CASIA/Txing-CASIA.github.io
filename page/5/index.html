<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"txing-casia.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":240,"display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="泛用人形决战型机器人博士">
<meta property="og:type" content="website">
<meta property="og:title" content="Txing">
<meta property="og:url" content="https://txing-casia.github.io/page/5/index.html">
<meta property="og:site_name" content="Txing">
<meta property="og:description" content="泛用人形决战型机器人博士">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Txing">
<meta property="article:tag" content="Txing">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://txing-casia.github.io/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Txing</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Txing</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">欢迎来到 | 伽蓝之堂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/07/14/2022-07-14-Autonomous%20Driving%20-%20Exploring%20Imitation%20Learning%20for%20Autonomous%20Driving%20with%20Feedback%20Synthesizer%20and%20Differentiable%20Rasterization%20(2021%20Apollo%206.0)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/07/14/2022-07-14-Autonomous%20Driving%20-%20Exploring%20Imitation%20Learning%20for%20Autonomous%20Driving%20with%20Feedback%20Synthesizer%20and%20Differentiable%20Rasterization%20(2021%20Apollo%206.0)/" class="post-title-link" itemprop="url">Autonomous Driving | Exploring Imitation Learning for Autonomous Driving with Feedback Synthesizer and Differentiable Rasterization (2021, Apollo 6.0)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-07-14 00:00:00" itemprop="dateCreated datePublished" datetime="2022-07-14T00:00:00+08:00">2022-07-14</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>9.7k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>9 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2
id="exploring-imitation-learning-for-autonomous-driving-with-feedback-synthesizer-and-differentiable-rasterization-2021-apollo-6.0">Exploring
Imitation Learning for Autonomous Driving with Feedback Synthesizer and
Differentiable Rasterization (2021, Apollo 6.0)</h2>
<h3 id="introduction">Introduction</h3>
<ul>
<li><p>our work adopts a <strong>mid-to-mid approach</strong>
(mid2mid允许便利地增加数据，并且通过任务依赖的loss超过单纯地模仿。allows
us to augment data handily and go beyond pure imitation by having
task-specific losses) where our system’s input is constructed by
building a top-down image representation of the environment that
incorporates both static and dynamic information from our <strong>HD
Map</strong> and <strong>perception system</strong>.<br />
</p></li>
<li><p>Following the philosophy of <strong>DAgger</strong> [2], we
introduce a <strong>feedback synthesizer</strong>（反馈合成器）that
generates and perturbs on-policy data based on the current policy. Then
we train the next policy on the aggregate of collected datasets. The
feedback synthesizer addresses the <strong>distributional shift
issue</strong>, thus improving the overall performance shown in Section
IV.</p>
<ul>
<li>[2]. S. Ross, G. Gordon, and D. Bagnell, “A reduction of imitation
learning and structured prediction to no-regret online learning,” in
AISTATS, 2011, pp. 627–635.<br />
</li>
</ul></li>
<li><p>启发本文的文章：</p>
<ul>
<li>V. Blukis, N. Brukhim, A. Bennett, R. Knepper, and Y. Artzi,
“Following high-level navigation instructions on a simulated quadcopter
with imitation learning,” in RSS, June 2018.</li>
<li>M. Bansal, A. Krizhevsky, and A. Ogale, “ChauffeurNet: Learning to
drive by imitating the best and synthesizing the worst,” in RSS,
2019.</li>
<li>A. Buhler, A. Gaidon, A. Cramariuc, R. Ambrus, G. Rosman, and W.
Burgard, “Driving through ghosts: Behavioral cloning with false
positives,” in IROS, 2020.</li>
<li>D. Chen, B. Zhou, V. Koltun, and P. Krahenbuhl, “Learning by
cheating,” in CoRL, 2020, pp. 66–75.<br />
</li>
</ul></li>
<li><p>单纯的模仿学习没有关于任务的明确的重要目标和约束，因此难免会学习到非期望的行为。通过引入task
losses可以控制这些非期望的行为。</p></li>
<li><p>task losses直接映射到输出轨迹到车辆光栅图像中。The task losses
are implemented by directly projecting the output trajectories into
top-down images using a differentiable vehicle rasterizer.</p></li>
<li><p>They（task losses） effectively penalize behaviors, such as
<strong>obstacle collision</strong>（障碍碰撞）, <strong>traffic rule
violation</strong>（违反交规）, and so on, by building losses between
<strong>rasterized images</strong> and <strong>specific object
masks</strong>.</p></li>
<li><p>Inspired by recent works [9], our output trajectories are
produced by a <strong>trajectory decoding module</strong> that includes
an <strong>LSTM</strong> [10] and a <strong>kinematic layer</strong>
that assures our output trajectories’ feasibility. On the whole, these
designs help us avoid using the heavy AgentRNN network in Chauffeurnet
[5], which functions similarly to a Convolutional-LSTM network [11].</p>
<ul>
<li><p>[5]. M. Bansal, A. Krizhevsky, and A. Ogale, “ChauffeurNet:
Learning to drive by imitating the best and synthesizing the worst,” in
RSS, 2019.</p></li>
<li><p>[9]. H. Cui, T. Nguyen, F.-C. Chou, T.-H. Lin, J. Schneider, D.
Bradley, and N. Djuric, “Deep kinematic models for kinematically
feasible vehicle trajectory predictions,” in ICRA, 2020, pp. 10 563–10
569.</p></li>
<li><p>[11]. X. Shi, Z. Chen, H. Wang, D.-Y. Yeung, W.-k. Wong, and
W.-c. Woo, “Convolutional LSTM network: A machine learning approach for
precipitation nowcasting,” in NeurIPS, vol. 28, 2015, pp.
802–810.</p></li>
</ul></li>
<li><p>Moreover, to further improve the performance, similar to recent
works [12], [13], we introduce a <strong>spatial attention
module</strong>（空间注意力机制） in our network design.</p>
<ul>
<li>[12]. S. Hecker, D. Dai, A. Liniger, and L. Van Gool, “Learning
accurate and human-like driving using semantic maps and attention,” in
IROS, 2020, pp. 2346–2353.</li>
<li>[13]. J. Kim and M. Bansal, “Attentional bottleneck: Towards an
interpretable deep driving network,” in CVPR Workshops, 2020.<br />
</li>
</ul></li>
<li><p>为了提高舒适度，提出了可选择的后处理规划器作为看门人，进行高级别的决策引导和组成新的轨迹。we
propose to add an <strong>optional post-processing planner</strong> as a
gatekeeper which manages to interpret them as high-level decision
guidance and composes a new trajectory that offers better
comfort.</p></li>
<li><p>Our models are trained with <strong>400 hours of human driving
data</strong>. We evaluated our system using <strong>70 autonomous
driving test scenarios (ADS)</strong> that are specifically created for
evaluating the fundamental driving capabilities of a self-driving
vehicle.</p></li>
<li><p>We show that our <strong>learning-based planner (M2)</strong>
trained via imitation learning achieves <strong>70.0% ADS</strong>
<strong>pass rate</strong> and can intelligently handle different
challenging scenarios, including <strong>overtaking a dynamic
vehicle</strong>, <strong>stopping for a red traffic light</strong>, and
so on, as shown in Figure 1.</p></li>
</ul>
<h3 id="related-works">Related works</h3>
<ul>
<li><p><strong>Imitation Learning</strong>：</p>
<p>一般遵循end-to-end philosophy，本文采取mid-to-mid
approach提高数据增强便利性和任务依赖的loss</p></li>
<li><p><strong>Loss and Differentiable Rasterization</strong>：</p>
<p>Imitation learning for motion planning typically applies a loss
between <strong>inferred</strong> and <strong>ground truth
trajectories</strong>. Therefore, the ideas of avoiding collisions or
off-road situations are implicit and don’t generalize well.</p>
<p>Wang et al. [8] leverage a differentiable rasterizer, and it allows
gradients to flow from a discriminator to a generator, enhancing a
trajectory prediction network powered by GANs [21].</p>
<p><strong>General-purpose differentiable mesh renderers</strong> [23],
[24] have also been employed to solve other computer vision
tasks.</p></li>
<li><p><strong>Attention</strong>：</p>
<p>by providing spatial attention heatmaps highlighting image areas that
the network attends to in their tasks. In this work, we introduce the
Atrous Spatial Attentional Bottleneck from [13], providing easily
interpretable attention heatmaps while also enhancing the network’s
performance.</p>
<ul>
<li>[13]. J. Kim and M. Bansal, “Attentional bottleneck: Towards an
interpretable deep driving network,” in CVPR Workshops, 2020.</li>
</ul></li>
<li><p><strong>Data Augmentation</strong>：</p>
<p>DAgger及其变体提出通过拥有更多关于代理可能遇到的状态的数据来解决分布转移问题。特别是，他们基于从当前策略推断的动作在每次迭代中采样新状态，让专家代理演示他们在这些新状态下将采取的动作，并在收集的数据集的集合上训练下一个策略。DAgger
[2] and its variants [32], [4], [3] propose to address the
distributional shift issue by having more data with states that the
agent is likely to encounter. In particular, they sample new states at
each iteration based on the actions inferred from the current policy,
let expert agents demonstrate the actions they would take under these
new states, and train the next policy on the aggregate of collected
datasets.</p>
<ul>
<li>S. Ross, G. Gordon, and D. Bagnell, “A reduction of imitation
learning and structured prediction to no-regret online learning,” in
AISTATS, 2011, pp. 627–635.</li>
</ul>
<p>ChauffeurNet引入了一个随机合成器，通过合成轨迹的扰动来增加演示数据。ChauffeurNet
[5] introduces a random synthesizer that augments the demonstration data
by synthesizing perturbations to the trajectories. In this work, we
explore both ideas and propose a feedback synthesizer improving the
overall performance.</p></li>
</ul>
<h3 id="model-architecture">Model Architecture</h3>
<p>B-CNN（branched CNN）</p>
<ul>
<li><p>refence：Zhu X , Bain M . B-CNN: Branch Convolutional Neural
Network for Hierarchical Classification[J]. 2017.</p></li>
<li><p><strong>Model Input</strong>：</p>
<ul>
<li>使用栅格化的多通道鸟瞰图。bird‘s eye view (BEV) representation with
multiple channels by scene rasterization</li>
<li>The image size is W × H with ρ meters per pixel in resolution.</li>
<li>agent汽车的位置永远在图像的中心位置 <span class="math display">\[p_0
= [i_0,j_0]^T\]</span> ，这种图片模式称为ego-centered</li>
<li>模型输入<span
class="math display">\[\mathcal{I}\]</span>是多通道图像，不仅包括ego-vehicle、路况信息、还有车辆速度信息<span
class="math display">\[v_0\]</span></li>
</ul></li>
<li><p><strong>Model Design</strong>：</p>
<ul>
<li><p>整个模型分为三个部分：</p>
<ul>
<li>A. 一个带空间注意力分支的CNN模型</li>
<li>B. 一个LSTM decoder</li>
<li>C. 一个可微分的光栅化模块（加在LSTM decoder上）</li>
</ul></li>
<li><p><strong>A.</strong> CNN骨架模型使用MobileNetV2
[37]以平衡输出精度和推断速度。输出特征是<span
class="math display">\[F_h\]</span>，经过一个MLP（multilayer
perceptron）层之后，输出扁平的特征<span
class="math display">\[h_0\]</span>。该特征作为同时作为LSTM
decoder的初始隐藏状态被使用。</p>
<p>为了减轻计算量，主干CNN的中间特征<span
class="math display">\[F_I\]</span>传递给空间注意力模块。注意力使用的是Atrous
Spatial Attentional Bottleneck from [13] （J. Kim and M. Bansal,
“Attentional bottleneck: Towards an interpretable deep driving network,”
in CVPR Workshops, 2020）</p></li>
<li><p><strong>B.</strong> LSTM的 cell state <span
class="math display">\[c_0\]</span> is initialized by the Glorot
initialization [38]</p>
<p>模型输出是汽车的转向角序列（steering angle）和加速度序列，记为<span
class="math display">\[(\delta_{t-1},a_{t-1})\]</span>。</p>
<p>动力学层： <span class="math display">\[
\begin{align}
\begin{cases}
    x_t=v_{t-1}\sin (\phi_{t-1})\Delta t + y_{t-1}\\
    y_t=v_{t-1}\cos (\phi_{t-1})\Delta t + x_{t-1}\\
    \phi_t=v_{t-1}\frac{\tan (\delta_{t-1})}{L} \Delta t + \phi_{t-1}\\
    v_t=a_{t-1}\Delta t + v_{t-1}
\end{cases}
\end{align}
\]</span></p></li>
<li><p><strong>C.</strong> Differentiable
Rasterizer使用三个高斯基函数来描述汽车的形状。</p>
<p>光栅化函数：<span class="math display">\[g_{i,j}(s_t)=\max_{k=1,2,3}
(N(\mu^k,\Sigma^k))\]</span> <span class="math display">\[
\begin{align}
\begin{cases}
\mu^k=\frac{1}{\rho}(x_t^k-x_0)+P_0\\
\Sigma^k=R(\phi_t)^T \text{diag}(\sigma_l,\sigma_{\omega})R(\phi_t)
\end{cases}
\end{align}
\]</span> 其中，<span
class="math display">\[(\sigma_l,sigma_{\omega})=(\frac{1}{3}\alpha
l,\alpha \omega)\]</span>，<span
class="math display">\[\alpha\]</span>是固定的比例系数，<span
class="math display">\[l\]</span>和<span
class="math display">\[\omega\]</span>是车辆的长度和宽度。<span
class="math display">\[R(\phi_t)\]</span>表示旋转矩阵。</p></li>
</ul></li>
<li><p><strong>Loss：</strong></p>
<p>trajectory imitation loss：<span
class="math display">\[L_{imit}=\sum^{N-1}_{t=0}\lambda\mid\mid s_t -
\hat{s}_t\mid\mid_2\]</span></p>
<p>four task losses：</p>
<ul>
<li><p>obstacle collision：<span
class="math display">\[L_{obs}=\sum^{N-1}_{t=0}\frac{1}{WH}\sum_i\sum_j
g_{i,j} \tau_{i,j}^{obs}\]</span></p></li>
<li><p>off-route：<span
class="math display">\[L_{route}=\sum^{N-1}_{t=0}\frac{1}{WH}\sum_i\sum_j
g_{i,j} \tau_{i,j}^{route}\]</span></p></li>
<li><p>off-road：<span
class="math display">\[L_{road}=\sum^{N-1}_{t=0}\frac{1}{WH}\sum_i\sum_j
g_{i,j} \tau_{i,j}^{road}\]</span></p></li>
<li><p>traffic signal violation：<span
class="math display">\[L_{signal}=\sum^{N-1}_{t=0}\frac{1}{WH}\sum_i\sum_j
g_{i,j} \tau_{i,j}^{signal}\]</span> 其中，<span
class="math display">\[\tau^{obs}\]</span>, <span
class="math display">\[\tau^{route}\]</span>, <span
class="math display">\[\tau^{road}\]</span>, and <span
class="math display">\[\tau^{signal}\]</span> 是响应的二值掩码（binary
masks）</p></li>
<li><p>总的损失函数：</p>
<p><span
class="math display">\[L=L_{imit}+\lambda_{task}(L_{obs}+L_{route}+L_{road}+L_{signal})\]</span></p></li>
</ul></li>
</ul>
<h3 id="data-augmentation">Data Augmentation</h3>
<ul>
<li><p><strong>Random
Synthesizer</strong>：随机扰动轨迹，产生off-road和碰撞的场景。起始点和终止点保持不变，扰动中间过程的<strong>一个</strong>点，并平滑路径轨迹，通过对最大曲率进行阈值处理，仅保留真实的扰动轨迹。</p></li>
<li><p><strong>Feedback
Synthesizer</strong>：学习一个驾驶策略帮助生成新的轨迹数据。用上一次迭代的策略<span
class="math display">\[\pi_{t-1}\]</span>生成轨迹数据，用于训练策略<span
class="math display">\[\pi_t\]</span>。具体算法如下：</p>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20220714-1.png"
alt="Feedback Synthesizer" />
<figcaption aria-hidden="true">Feedback Synthesizer</figcaption>
</figure></li>
<li><p><strong>Post-processing
Planner</strong>：保证舒适和安全。相关实现在 Apollo 6.0
中（https://github.com/ApolloAuto/apollo/tree/master/modules/planning）
<span class="math display">\[
\text{Quadratic Optimization} \leftarrow
\begin{cases}
\text{Safety Bounds}\\
\text{Learning-based Objective}\\
\text{Comfort Constrains}
\end{cases}
\]</span></p></li>
</ul>
<h3 id="experiments">Experiments</h3>
<ul>
<li><p><strong>Implementation Details</strong></p>
<p>方形的BEV图（俯瞰图）宽度<span class="math display">\[W\times
H=200\times200\]</span>，<span
class="math display">\[\rho=0.2m/pixel\]</span>。ego-vehicle位于图片的<span
class="math display">\[i_0=100,j_0=160\]</span>的位置。使用Apollo的感知模块（“Baidu
Apollo open platform,”
http://apollo.auto/）光栅化2秒的历史数据或者预测数据。使用Adam
optimizer，且初始学习率为<span
class="math display">\[0.0003\]</span>。</p></li>
<li><p><strong>Dataset and Augmented Data</strong></p>
<ul>
<li><p>400 hours’ driving data demonstrated by human-drivers in southern
San Francisco bay area。</p></li>
<li><p>经过数据预处理后，保留了250k帧作为原始的训练数据<span
class="math display">\[D_0\]</span></p></li>
<li><p>利用random synthesizer生成400k帧数据，记为<span
class="math display">\[D_r\]</span></p></li>
<li><p>设置feedback steps T = 5，feedback
synthesizer生成465k帧数据，记为<span
class="math display">\[D_f\]</span></p></li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20220714-2.png"
alt="不同模型配置的性能对比" />
<figcaption aria-hidden="true">不同模型配置的性能对比</figcaption>
</figure>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20220714-3.png"
alt="offroad,speeding,collision,and failed to arrive性能对比" />
<figcaption aria-hidden="true">offroad,speeding,collision,and failed to
arrive性能对比</figcaption>
</figure></li>
<li><p><strong>Evaluation Scenarios</strong></p>
<p>使用Apollo Dreamland simulator。主要包括4类场景：</p>
<ul>
<li><strong>巡航 Cruising</strong>: normal cruising in straight or
curved roads without other traffic participants.</li>
<li><strong>岔道口 Junction</strong>: junction related scenarios
including left or right turns, U-turns, stop before a traffic signal,
etc.</li>
<li><strong>静态交互 Static Interaction</strong>: interaction with
static obstacles, such as overtaking a stopped car.</li>
<li><strong>动态交互 Dynamic Interaction</strong>: interaction with
dynamic obstacles, for example, overtaking a slow vehicle.</li>
</ul></li>
<li><p><strong>Evaluation Metrics</strong></p>
<p>除了通过率和成功率以外，还使用了舒适度评分。舒适度评分是根据自动驾驶状态和人类驾驶状态的相识度计算得到的。</p>
<p>在人驾数据集<span
class="math display">\[D_0\]</span>中还包括了角速度和角加加速度<span
class="math display">\[(\omega,j)\]</span>，使用这两个数据，可得舒适度评分为：<span
class="math display">\[c=\frac{\sum_{i=1}^N P(\omega,j\mid
D_0)}{n}\]</span>。其中，<span class="math display">\[P(\omega,j\mid
D_0)\]</span>表示状态<span
class="math display">\[(\omega,j)\]</span>在人驾数据<span
class="math display">\[D_0\]</span>中出现的概率，<span
class="math display">\[n\]</span>表示帧数。<span
class="math display">\[\omega\]</span>和<span
class="math display">\[j\]</span>都经过离散化处理（0.1 and
1.0），直接查表读取响应的概率。</p>
<p>agent被要求在时间限制之内到达目的地，同时避免碰撞等事故（出现则判定失败）。</p></li>
<li><p><strong>Runtime Analysis</strong></p>
<p>an Nvidia Titan-V GPU, Intel Core i7-9700K CPU, and 16GB Memory.</p>
<p>The online inference time per frame is <strong>10ms</strong> in
rendering, <strong>22 ms</strong> in model inference, and <strong>15
ms</strong> (optional) in the post-processing planner. Note that our
model inference time is much shorter than the prior work [5]</p></li>
</ul>
<p>模型出现的主要问题是超速、不能到达和碰撞。超速可以通过添加速度损失来解决，不能到达是由于速度过慢，碰撞多是出现了追尾，因此发生被动碰撞。值得注意的是，实验中其它的车辆都是按照既定轨迹运动的，不会避让ego车辆，因此容易出现追尾风险。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/05/31/2022-05-30-Reinforcement%20Learning%20-%20a%20survey%20of%20deep%20RL%20and%20IL%20for%20autonomous%20driving%20policy%20learning/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/31/2022-05-30-Reinforcement%20Learning%20-%20a%20survey%20of%20deep%20RL%20and%20IL%20for%20autonomous%20driving%20policy%20learning/" class="post-title-link" itemprop="url">Reinforcement Learning | A survey of deep RL and IL for autonomous driving policy learning</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-31 00:00:00" itemprop="dateCreated datePublished" datetime="2022-05-31T00:00:00+08:00">2022-05-31</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>4.3k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>4 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="a-survey-of-deep-rl-and-il-for-autonomous-driving-policy-learning">A
survey of deep RL and IL for autonomous driving policy learning</h1>
<p>论文链接：https://arxiv.org/abs/2101.01993v1</p>
<h2 id="背景">背景</h2>
<ul>
<li><p>首先介绍5类结合了IL和RL的自动驾驶模型。First, a taxonomy of the
literature studies is constructed from the system perspective, among
which five modes of integration of DRL/DIL models into an AD
architecture are identified.</p></li>
<li><p>其次介绍自动驾驶中具体的RL和IL任务和公式。Second, the
formulations of DRL/DIL models for conducting specified AD tasks are
comprehensively reviewed, where various designs on the model state and
action spaces and the reinforcement learning rewards are
covered.</p></li>
<li><p>最后介绍RL和IL如何解决自动驾驶模型与参与者和环境交互的安全问题。Finally,
an in-depth review is conducted on how the critical issues of AD
applications regarding driving safety, interaction with other traffic
participants and uncertainty of the environment are addressed by the
DRL/DIL models.</p></li>
<li><p><strong>task-driven</strong> and <strong>problem-driven</strong>
perspectives</p></li>
<li><p>代表性文章：</p>
<ul>
<li>[1] C. Urmson and W. Whittaker, “Self-driving cars and the urban
challenge,” IEEE Intelligent Systems, vol. 23, no. 2, pp. 66–68,
2008.</li>
<li>[2] S. Thrun, “Toward robotic cars,” Communications of the ACM, vol.
53, no. 4, pp. 99–106, 2010.</li>
<li>[3] A. Eskandarian, Handbook of intelligent vehicles. Springer,
2012, vol. 2.</li>
<li>[4] S. M. Grigorescu, B. Trasnea, T. T. Cocias, and G. Macesanu, “A
survey of deep learning techniques for autonomous driving,” J. Field
Robotics, vol. 37, no. 3, pp. 362–386, 2020.</li>
</ul></li>
<li><p>驾驶策略基于多个等级的抽象（multiple levels of
abstraction），例如行为规划、运动规划和控制（behavior planning, motion
planning and control）</p></li>
<li><p>典型的自动驾驶模型结构图：</p>
<p><img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20220602-1.png" /></p></li>
<li><p>相关综述的调研：</p>
<ul>
<li>[13, 15] survey the motion planning and control methods of automated
vehicles before the era of DL.</li>
<li>[29–33] review general DRL/DIL methods without considering any
particular applications.</li>
<li>[4] addresses the deep learning techniques for AD with a focus on
perception and control, while [34] addresses control only.</li>
<li>[35] provides a taxonomy of AD tasks to which DRL models have been
applied and highlights the key challenges.</li>
</ul></li>
<li><p>pomdp相关参考文献：</p>
<ul>
<li>G. Shani, J. Pineau, and R. Kaplow, “A survey of point-based pomdp
solvers,” Autonomous Agents and Multi-Agent Systems, vol. 27, no. 1, pp.
1–51, 2013.</li>
<li>W. S. Lovejoy, “A survey of algorithmic methods for partially
observed markov decision processes,” Annals of Operations Research, vol.
28, no. 1, pp. 47–65, 1991.</li>
</ul></li>
<li><p>强化学习（reinforcement learning）和模仿学习（imitation
learning）算法分类示意图：</p>
<p><img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20220620-1.png" /></p></li>
<li><p>learning from demonstrations (LfD)</p></li>
<li><p><strong>模仿学习</strong>的形式：</p>
<ul>
<li>A demonstration dataset <span class="math display">\[D=\{\xi_i
\}_{i=0,...,N}\]</span>,表示一系列的轨迹</li>
<li><span
class="math display">\[\xi_i=\{(s^i_t,a^i_t)\}_{t=1,...,T}\]</span>是state-action
pairs（状态行为对）的序列</li>
<li>专家策略<span class="math display">\[\pi_E\]</span></li>
<li>待优化的模仿策略<span class="math display">\[\pi^*\]</span></li>
<li><span class="math display">\[\pi^*=\arg\min_{\pi}
\mathbb{D}(\pi_E,\pi)\]</span></li>
<li><span
class="math display">\[\mathbb{D}\]</span>是策略间的相似性度量函数</li>
</ul></li>
<li><p>模仿学习的三个分类：</p>
<ul>
<li><p><strong>Behavior Clone (BC) :</strong></p>
<ul>
<li><p><span class="math display">\[\min_{\theta}
\mathbb{E}\mid\mid\pi_{\theta}-\pi_E\mid\mid_2\]</span></p></li>
<li><p><span class="math display">\[J(\theta)=\mathbb{E}_{(s,a)\sim
D}[(\pi_{\theta}(s)-a)^2]\]</span></p></li>
<li><p>BC在训练集中表现良好，但在泛化性上表现差，covariate shift [66,
67]</p></li>
<li><p>代表方法：</p>
<ul>
<li><p><strong>DAgger</strong>——S. Ross, G. J. Gordon, and D. Bagnell,
“A reduction of imitation learning and structured prediction to
no-regret online learning,” in International Conference on Artificial
Intelligence and Statistics, ser. JMLR Proceedings, vol. 15, 2011, pp.
627–635.</p></li>
<li><p><strong>SafeDAgger</strong>——J. Zhang and K. Cho,
“Query-efficient imitation learning for end-to-end autonomous driving,”
arXiv preprint arXiv:1605.06450, 2016.</p></li>
</ul></li>
</ul></li>
<li><p><strong>Inverse Reinforcement Learning (IRL)：</strong></p>
<ul>
<li><p><span class="math display">\[\max_{\theta}
\mathbb{E}_{\pi_E}[G_t|r_{\theta}]-\mathbb{E}_{\pi}[G_t|r_{\theta}]\]</span></p></li>
<li><p><span class="math display">\[J(\theta)=\mathbb{E}_{\xi_i \sim
D}[\log P(\xi_i|r_{\theta})]\]</span></p></li>
<li><p>代表方法：</p>
<ul>
<li><p><strong>guided cost learning (GCL)</strong>——C. Finn, S. Levine,
and P. Abbeel, “Guided cost learning: Deep inverse optimal control via
policy optimization,” in International Conference on Machine Learning,
2016, pp. 49–58.</p>
<p>（it handles unknown dynamics in high-dimensional complex systems and
learns complex neural network cost functions through an efficient
sample-based approximation.）</p></li>
</ul></li>
</ul></li>
<li><p><strong>Generative Adversarial Imitation Learning
(GAIL):</strong></p></li>
<li><p>Generative adversarial imitation learning (GAIL) [81] directly
learns a policy from expert demonstrations while requiring neither the
<strong>reward design</strong> in RL nor the <strong>expensive RL
process</strong> in the inner loop of IRL.</p></li>
<li><p><span class="math display">\[\min_{\pi_{\theta}}\max_{D_{\omega}}
\mathbb{E}_{\pi_{\theta}}[\log
D_{\omega}(s,a)]+\mathbb{E}_{\pi_E}[\log(1-D_{\omega}(s,a))]-\lambda
H(\pi_{\theta})\]</span>，其中<span
class="math display">\[H(\pi)\]</span>是一个正则熵项，生成器和判别器通过下式更新：</p></li>
<li><p><span
class="math display">\[\nabla_{\theta}J(\theta)=\mathbb{E}_{\pi}[\nabla_{\theta}
\log \pi_{\theta}(a\mid
s)Q(s,a)]-\lambda\nabla_{\theta}H(\pi_{\theta})\]</span></p></li>
<li><p><span
class="math display">\[\nabla_{\omega}J(\omega)=\mathbb{E}_{\pi}[\nabla_{\omega}
\log D_{\omega}(s,a)]+\mathbb{E}_{\pi_E}[\nabla_{\omega}
\log(1-D_{\omega}(s,a))]\]</span></p></li>
<li><p>Fu et al.[84] proposed adversarial inverse reinforcement learning
(AIRL) based on an adversarial reward learning formulation, which can
recover reward functions that are robust to dynamics changes.</p>
<ul>
<li>J. Fu, K. Luo, and S. Levine, “Learning robust rewards with
adversarial inverse reinforcement learning,” CoRR, vol. abs/1710.11248,
2017.</li>
</ul></li>
</ul></li>
<li><h2 id="adautonomous-driving系统的几个模块">AD（Autonomous
driving）系统的几个模块：</h2></li>
</ul>
<h2 id="主要内容">主要内容</h2>
<ul>
<li></li>
</ul>
<h2 id="总结">总结</h2>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/05/14/2022-05-14-%E5%88%A9%E7%94%A8patch%E5%88%B6%E4%BD%9C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%A8animation%E4%BB%A5%E5%8F%8A%E7%94%9F%E6%88%90Gif%E6%96%87%E4%BB%B6%E6%97%B6%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/05/14/2022-05-14-%E5%88%A9%E7%94%A8patch%E5%88%B6%E4%BD%9C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%9C%A8animation%E4%BB%A5%E5%8F%8A%E7%94%9F%E6%88%90Gif%E6%96%87%E4%BB%B6%E6%97%B6%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF%E7%9A%84%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">利用patch制作的对象在animation以及生成Gif文件时显示错误的问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-05-14 00:00:00" itemprop="dateCreated datePublished" datetime="2022-05-14T00:00:00+08:00">2022-05-14</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>647</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="利用patch制作的对象在animation以及生成gif文件时显示错误的问题">利用patch制作的对象在animation以及生成Gif文件时显示错误的问题</h1>
<h2 id="problems">Problems：</h2>
<p>animation制作动画的时候，用patch制作的对象（例如Circle）在背景层，即使设置为返回值来清除，在下一帧更新的时候，上一帧也不会消失，从而造层残影的效果。而且由于图形的利用ax.add_patch()直接添加，没办法单个删除，很让人头痛。</p>
<p>而这一现象在plt.show()的时候，如果animation.FuncAnimation( blit=True)
则不会在预览时出现问题，在保存为gif时候才会暴露。</p>
<h2 id="solutions">Solutions：</h2>
<h3 id="method-1惹不起躲得起法">Method 1：惹不起躲得起法</h3>
<p>不使用patch制作Circle等对象，而通过lines在描点连线制作，这种方法比较笨重，想要精确表达图形每一帧都需要大量的点，而在动态时候，点的运动也是一个难题。</p>
<h3 id="method-2将错就错法">Method 2：将错就错法</h3>
<p>既然patch制作的对象难以删除，我们可以将错就错，每一帧更新的时候都用一个背景色（白色）的图形盖住上一帧的的图形，从而达到删除的效果。</p>
<p>值得注意的是，白色图形需要比原图形略大一点，以免留下上一帧的边框。</p>
<p>在设定每一帧的返回值的时候，图形名称的排序决定了图层的顺序。利用此方法需要将原白色图形放在这一帧的图形之前。</p>
<h2 id="conclusions">Conclusions：</h2>
<p>目前找到的两个方法都各自存在问题，方法1太笨重，若非迫不得已肯定不会使用。方法2是间接的方法，有点小聪明，但没有直接解决问题，以后还需要继续探索更好的解决方法。</p>
<p>问题处理时长：2天</p>
<p>2019年8月29日</p>
<p>Txing</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/04/20/2022-04-20-Q198-%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/20/2022-04-20-Q198-%E6%89%93%E5%AE%B6%E5%8A%AB%E8%88%8D-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="post-title-link" itemprop="url">Q198-打家劫舍-中等-动态规划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-20 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-20T00:00:00+08:00">2022-04-20</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.3k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="打家劫舍"><a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/house-robber/">198.
打家劫舍</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p>你是一个专业的小偷，计划偷窃沿街的房屋。每间房内都藏有一定的现金，影响你偷窃的唯一制约因素就是相邻的房屋装有相互连通的防盗系统，如果两间相邻的房屋在同一晚上被小偷闯入，系统会自动报警。</p>
<p>给定一个代表每个房屋存放金额的非负整数数组，计算你
不触动警报装置的情况下 ，一夜之内能够偷窃到的最高金额。</p>
</blockquote>
<blockquote>
<p><strong>Example 1:</strong></p>
<p>输入：[1,2,3,1] 输出：4 解释：偷窃 1 号房屋 (金额 = 1) ，然后偷窃 3
号房屋 (金额 = 3)。 偷窃到的最高金额 = 1 + 3 = 4 。</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：[2,7,9,3,1] 输出：12 解释：偷窃 1 号房屋 (金额 = 2), 偷窃 3
号房屋 (金额 = 9)，接着偷窃 5 号房屋 (金额 = 1)。 偷窃到的最高金额 = 2 +
9 + 1 = 12 。</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li><code>1 &lt;= nums.length &lt;= 100</code></li>
<li><code>0 &lt;= nums[i] &lt;= 400</code></li>
</ul>
</blockquote>
<h3 id="approach-1-动态规划">Approach 1: 动态规划</h3>
<p>首先考虑最简单的情况。如果只有一间房屋，则偷窃该房屋，可以偷窃到最高总金额。如果只有两间房屋，则由于两间房屋相邻，不能同时偷窃，只能偷窃其中的一间房屋，因此选择其中金额较高的房屋进行偷窃，可以偷窃到最高总金额。</p>
<p>如果房屋数量大于两间，应该如何计算能够偷窃到的最高总金额呢？对于第 k
(k&gt;2) 间房屋，有两个选项：</p>
<ul>
<li><p>偷窃第 k 间房屋，那么就不能偷窃第 k-1 间房屋，偷窃总金额为前 k−2
间房屋的最高总金额与第 kk 间房屋的金额之和。</p></li>
<li><p>不偷窃第 k 间房屋，偷窃总金额为前 k−1
间房屋的最高总金额。</p></li>
</ul>
<p>在两个选项中选择偷窃总金额较大的选项，该选项对应的偷窃总金额即为前 k
间房屋能偷窃到的最高总金额。</p>
<p>用 <span class="math display">\[\textit{dp}[i]\]</span> 表示前 <span
class="math display">\[i\]</span>
间房屋能偷窃到的最高总金额，那么就有如下的状态转移方程：</p>
<p><span class="math display">\[
dp[i]=\max(dp[i−2]+nums[i],dp[i−1])
\]</span> 边界条件为： <span class="math display">\[
\begin{cases}
dp[0]=nums[0] &amp; 只有一间房屋，则偷窃该房屋
\\
dp[1]=\max(nums[0],nums[1]) &amp;
只有两间房屋，选择其中金额较高的房屋进行偷窃
\end{cases}
\]</span> 最终的答案即为 <span
class="math display">\[\textit{dp}[n-1]\]</span>，其中 <span
class="math display">\[n\]</span> 是数组的长度。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">rob</span>(<span class="params">self, nums: <span class="type">List</span>[<span class="built_in">int</span>]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        n = <span class="built_in">len</span>(nums)</span><br><span class="line">        <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">elif</span> n == <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">max</span>(nums)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dp = [<span class="number">0</span>]*n</span><br><span class="line">            dp[<span class="number">0</span>] = nums[<span class="number">0</span>]</span><br><span class="line">            dp[<span class="number">1</span>] = <span class="built_in">max</span>(nums[<span class="number">0</span>:<span class="number">2</span>])</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,n):</span><br><span class="line">                dp[i] = <span class="built_in">max</span>(dp[i-<span class="number">1</span>],dp[i-<span class="number">2</span>]+nums[i])</span><br><span class="line">            <span class="keyword">return</span> dp[-<span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li>时间复杂度：<span class="math display">\[O(n)\]</span>，其中 <span
class="math display">\[n\]</span>
是数组长度。只需要对数组遍历一次。</li>
<li>空间复杂度：<span
class="math display">\[O(1)\]</span>。使用滚动数组，可以只存储前两间房屋的最高总金额，而不需要存储整个数组的结果，因此空间复杂度是
<span class="math display">\[O(1)\]</span>。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/04/10/2022-04-10-Q221-%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/10/2022-04-10-Q221-%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="post-title-link" itemprop="url">Q221-最大正方形-中等-动态规划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-10 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-10T00:00:00+08:00">2022-04-10</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.2k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="最大正方形"><a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximal-square/">221.
最大正方形</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p>在一个由 <code>'0'</code> 和 <code>'1'</code>
组成的二维矩阵内，找到只包含 <code>'1'</code>
的最大正方形，并返回其面积。</p>
</blockquote>
<blockquote>
<p><strong>Example 1:</strong></p>
<p>输入：matrix = [</p>
<p>["1","0","1","0","0"],</p>
<p>["1","0","1","1","1"],</p>
<p>["1","1","1","1","1"],</p>
<p>["1","0","0","1","0"]] 输出：4</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：matrix = [["0","1"],["1","0"]] 输出：1</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：matrix = [["0"]] 输出：0</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>m == matrix.length</li>
<li>n == matrix[i].length</li>
<li>1 &lt;= m, n &lt;= 300</li>
<li>matrix[i][j] 为 '0' 或 '1'</li>
</ul>
</blockquote>
<h3 id="approach-1-动态规划">Approach 1: 动态规划</h3>
<p>可以使用动态规划降低时间复杂度。我们用 <span
class="math display">\[\textit{dp}(i, j)\]</span> 表示以 <span
class="math display">\[(i, j)\]</span> 为右下角，且只包含 1
的正方形的边长最大值。如果我们能计算出所有 <span
class="math display">\[\textit{dp}(i, j)\]</span>
的值，那么其中的最大值即为矩阵中只包含 1
的正方形的边长最大值，其平方即为最大正方形的面积。</p>
<p>那么如何计算 <span class="math display">\[\textit{dp}\]</span>
中的每个元素值呢？对于每个位置 <span class="math display">\[(i,
j)\]</span>，检查在矩阵中该位置的值：</p>
<ul>
<li>如果该位置的值是 0，则 <span class="math display">\[\textit{dp}(i,
j) = 0\]</span>，因为当前位置不可能在由 1 组成的正方形中；</li>
<li>如果该位置的值是 1，则 <span class="math display">\[\textit{dp}(i,
j)\]</span> 的值由其上方、左方和左上方的三个相邻位置的 <span
class="math display">\[\textit{dp}\]</span>
值决定。具体而言，当前位置的元素值等于三个相邻位置的元素中的最小值加
1，状态转移方程如下：</li>
</ul>
<p><span class="math display">\[
dp(i,j)=min\big(dp(i−1,j),dp(i−1,j−1),dp(i,j−1)\big)+1
\]</span> 如果读者对这个状态转移方程感到不解，可以参考 1277. 统计全为 1
的正方形子矩阵的官方题解，其中给出了详细的证明。</p>
<p>此外，还需要考虑边界条件。如果 i 和 j 中至少有一个为 0，则以位置 (i,
j) 为右下角的最大正方形的边长只能是 1，因此 <span
class="math display">\[\textit{dp}(i, j) = 1\]</span>。</p>
<p>Python:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">maximalSquare</span>(<span class="params">self, matrix: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">str</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(matrix) == <span class="number">0</span> <span class="keyword">or</span> <span class="built_in">len</span>(matrix[<span class="number">0</span>]) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        </span><br><span class="line">        maxSide = <span class="number">0</span></span><br><span class="line">        rows, columns = <span class="built_in">len</span>(matrix), <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">        dp = [[<span class="number">0</span>] * columns <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(rows)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(rows):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(columns):</span><br><span class="line">                <span class="keyword">if</span> matrix[i][j] == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">                    <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">or</span> j == <span class="number">0</span>:</span><br><span class="line">                        dp[i][j] = <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        dp[i][j] = <span class="built_in">min</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span></span><br><span class="line">                    maxSide = <span class="built_in">max</span>(maxSide, dp[i][j])</span><br><span class="line">        </span><br><span class="line">        maxSquare = maxSide * maxSide</span><br><span class="line">        <span class="keyword">return</span> maxSquare</span><br></pre></td></tr></table></figure>
<p>C++:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">maximalSquare</span><span class="params">(vector&lt;vector&lt;<span class="type">char</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (matrix.<span class="built_in">size</span>() == <span class="number">0</span> || matrix[<span class="number">0</span>].<span class="built_in">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> maxSide = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> rows = matrix.<span class="built_in">size</span>(), columns = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        vector&lt;vector&lt;<span class="type">int</span>&gt;&gt; <span class="built_in">dp</span>(rows, <span class="built_in">vector</span>&lt;<span class="type">int</span>&gt;(columns));</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; columns; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (matrix[i][j] == <span class="string">&#x27;1&#x27;</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i == <span class="number">0</span> || j == <span class="number">0</span>) &#123;</span><br><span class="line">                        dp[i][j] = <span class="number">1</span>;</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        dp[i][j] = <span class="built_in">min</span>(<span class="built_in">min</span>(dp[i - <span class="number">1</span>][j], dp[i][j - <span class="number">1</span>]), dp[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    maxSide = <span class="built_in">max</span>(maxSide, dp[i][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> maxSquare = maxSide * maxSide;</span><br><span class="line">        <span class="keyword">return</span> maxSquare;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li>时间复杂度：<span class="math display">\[O(mn)\]</span>，其中 m 和 n
是矩阵的行数和列数。需要遍历原始矩阵中的每个元素计算 <span
class="math display">\[\textit{dp}\]</span> 的值。</li>
<li>空间复杂度：<span class="math display">\[O(mn)\]</span>，其中 m 和 n
是矩阵的行数和列数。创建了一个和原始矩阵大小相同的矩阵 <span
class="math display">\[\textit{dp}\]</span>。由于状态转移方程中的 <span
class="math display">\[\textit{dp}(i, j)\]</span>
由其上方、左方和左上方的三个相邻位置的 <span
class="math display">\[\textit{dp}\]</span>
值决定，因此可以使用两个一维数组进行状态转移，空间复杂度优化至 <span
class="math display">\[O(n)\]</span>。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/04/08/2022-04-08-Q1277-%E7%BB%9F%E8%AE%A1%E5%85%A8%E4%B8%BA1%E7%9A%84%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%AD%90%E7%9F%A9%E9%98%B5-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/08/2022-04-08-Q1277-%E7%BB%9F%E8%AE%A1%E5%85%A8%E4%B8%BA1%E7%9A%84%E6%AD%A3%E6%96%B9%E5%BD%A2%E5%AD%90%E7%9F%A9%E9%98%B5-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="post-title-link" itemprop="url">Q1277-统计全为1的正方形子矩阵-中等-动态规划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-08T00:00:00+08:00">2022-04-08</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="统计全为-1-的正方形子矩阵"><a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/count-square-submatrices-with-all-ones/">1277.
统计全为 1 的正方形子矩阵</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p>给你一个 m * n 的矩阵，矩阵中的元素不是 0 就是
1，请你统计并返回其中完全由 1 组成的 正方形 子矩阵的个数。</p>
</blockquote>
<blockquote>
<p><strong>Example 1:</strong></p>
<p>输入：matrix = [ [0,1,1,1], [1,1,1,1], [0,1,1,1]] 输出：15 解释：
边长为 1 的正方形有 10 个。 边长为 2 的正方形有 4 个。 边长为 3
的正方形有 1 个。 正方形的总数 = 10 + 4 + 1 = 15.</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：matrix = [ [1,0,1], [1,1,0], [1,1,0]] 输出：7 解释： 边长为 1
的正方形有 6 个。 边长为 2 的正方形有 1 个。 正方形的总数 = 6 + 1 =
7.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>1 &lt;= arr.length &lt;= 300</li>
<li>1 &lt;= arr[0].length &lt;= 300</li>
<li>0 &lt;= arr[i][j] &lt;= 1</li>
</ul>
</blockquote>
<h3 id="approach-1-动态规划">Approach 1: 动态规划</h3>
<p>本题和 <a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/maximal-square/">221.
最大正方形</a>非常类似，使用的方法也几乎相同。</p>
<p>我们用 <code>f[i][j]</code> 表示以 <code>(i, j)</code>
为右下角的正方形的最大边长，那么除此定义之外，<code>f[i][j] = x</code>
也表示以 <code>(i, j)</code> 为右下角的正方形的数目为
<code>x</code>（即边长为 1, 2, ..., x 的正方形各一个）。在计算出所有的
<code>f[i][j]</code>
后，我们将它们进行累加，就可以得到矩阵中正方形的数目。</p>
<p>我们尝试挖掘 <code>f[i][j]</code> 与相邻位置的关系来计算出
<code>f[i][j]</code> 的值。</p>
<p>如上图所示，若对于位置 <code>(i, j)</code> 有
<code>f[i][j] = 4</code>，我们将以 <code>(i, j)</code> 为右下角、边长为
4 的正方形涂上色，可以发现其左侧位置 <code>(i, j - 1)</code>，上方位置
<code>(i - 1, j)</code>和左上位置
<code>(i - 1, j - 1)</code>均可以作为一个边长为 <code>4 - 1 = 3</code>
的正方形的右下角。也就是说，这些位置的的 <code>f</code> 值至少为
3，即：</p>
<p><span class="math display">\[
f[i][j - 1] &gt;= f[i][j] - 1\\
f[i - 1][j] &gt;= f[i][j] - 1\\
f[i - 1][j - 1] &gt;= f[i][j] - 1
\]</span> 将这三个不等式联立，可以得到： <span class="math display">\[
\min(f[i][j−1],f[i−1][j],f[i−1][j−1])≥f[i][j]−1
\]</span> 这是我们通过固定 <code>f[i][j]</code>
的值，判断其相邻位置与之的关系得到的不等式。同理，我们也可以固定
<code>f[i][j]</code> 相邻位置的值，得到另外的限制条件。</p>
<p>如上图所示，假设 <code>f[i][j - 1]</code>，<code>f[i - 1][j]</code>
和 <code>f[i - 1][j - 1]</code> 中的最小值为
3，也就是说，<code>(i, j - 1)</code>，<code>(i - 1, j)</code> 和
<code>(i - 1, j - 1)</code> 均可以作为一个边长为 3
的正方形的右下角。我们将这些边长为 3
的正方形依次涂上色，可以发现，如果位置 <code>(i, j)</code> 的元素为
1，那么它可以作为一个边长为 4 的正方形的右下角，<code>f</code> 值至少为
4，即：</p>
<p><span class="math display">\[
f[i][j] \geq \min(f[i][j−1],f[i−1][j],f[i−1][j−1])+1
\]</span> 将其与上一个不等式联立，可以得到： <span
class="math display">\[
f[i][j]=\min(f[i][j−1],f[i−1][j],f[i−1][j−1])+1
\]</span> 这样我们就得到了 <code>f[i][j]</code>
的递推式。此外还要考虑边界（i = 0 或 j = 0）以及位置 <code>(i, j)</code>
的元素为 0 的情况，可以得到如下完整的递推式：</p>
<p><span class="math display">\[
f[i][j]=
\begin{cases}
matrix[i][j], &amp;i==0 or j==0\\
0, &amp;matrix[i][j]==0\\
\min (f[i][j-1],f[i-1][j],f[i-1][j-1])+1, &amp;otherwise
\end{cases}
\]</span> 我们按照行优先的顺序依次计算 <code>f[i][j]</code>
的值，就可以得到最终的答案。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">countSquares</span>(<span class="params">self, matrix: <span class="type">List</span>[<span class="type">List</span>[<span class="built_in">int</span>]]</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        m, n = <span class="built_in">len</span>(matrix), <span class="built_in">len</span>(matrix[<span class="number">0</span>])</span><br><span class="line">        f = [[<span class="number">0</span>] * n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">                <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">or</span> j == <span class="number">0</span>:</span><br><span class="line">                    f[i][j] = matrix[i][j]</span><br><span class="line">                <span class="keyword">elif</span> matrix[i][j] == <span class="number">0</span>:</span><br><span class="line">                    f[i][j] = <span class="number">0</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    f[i][j] = <span class="built_in">min</span>(f[i][j - <span class="number">1</span>], f[i - <span class="number">1</span>][j], f[i - <span class="number">1</span>][j - <span class="number">1</span>]) + <span class="number">1</span></span><br><span class="line">                ans += f[i][j]</span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">countSquares</span><span class="params">(vector&lt;vector&lt;<span class="type">int</span>&gt;&gt;&amp; matrix)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> m = matrix.<span class="built_in">size</span>(),n = matrix[<span class="number">0</span>].<span class="built_in">size</span>();</span><br><span class="line">        <span class="type">int</span> f[m][n];</span><br><span class="line">        <span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">                f[i][j]=<span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">0</span>;i &lt; m;i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j = <span class="number">0</span>;j &lt; n;j++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(i==<span class="number">0</span> || j==<span class="number">0</span>)&#123;</span><br><span class="line">                    f[i][j] = matrix[i][j];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(matrix[i][j] == <span class="number">0</span>)&#123;</span><br><span class="line">                    f[i][j] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span>&#123;</span><br><span class="line">                    f[i][j] = <span class="built_in">min</span>(f[i<span class="number">-1</span>][j<span class="number">-1</span>],<span class="built_in">min</span>(f[i<span class="number">-1</span>][j],f[i][j<span class="number">-1</span>]))+<span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                ans += f[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li><p>时间复杂度：<code>O(MN)</code>。</p></li>
<li><p>空间复杂度：<code>O(MN)</code>。由于递推式中 <code>f[i][j]</code>
只与本行和上一行的若干个值有关，因此空间复杂度可以优化至
<code>O(N)</code>。</p></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/04/08/2022-04-08-Q62-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/08/2022-04-08-Q62-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="post-title-link" itemprop="url">Q62-不同路径-中等-动态规划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-08T00:00:00+08:00">2022-04-08</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.1k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="不同路径"><a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-paths/">62.
不同路径</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p>一个机器人位于一个 m x n 网格的左上角 （起始点在下图中标记为 “Start”
）。</p>
<p>机器人每次只能向下或者向右移动一步。机器人试图达到网格的右下角（在下图中标记为
“Finish” ）。</p>
<p>问总共有多少条不同的路径？</p>
</blockquote>
<blockquote>
<p><strong>Example 1:</strong></p>
<p>输入：m = 3, n = 7 输出：28</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：m = 3, n = 2 输出：3 解释： 从左上角开始，总共有 3
条路径可以到达右下角。</p>
<ol type="1">
<li>向右 -&gt; 向下 -&gt; 向下</li>
<li>向下 -&gt; 向下 -&gt; 向右</li>
<li>向下 -&gt; 向右 -&gt; 向下</li>
</ol>
</blockquote>
<blockquote>
<p><strong>Example 3:</strong></p>
<p>输入：m = 7, n = 3 输出：28</p>
</blockquote>
<blockquote>
<p><strong>Example 4:</strong></p>
<p>输入：m = 3, n = 3 输出：6</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li><code>1 &lt;= m, n &lt;= 100</code></li>
<li>题目数据保证答案小于等于 <code>2 * 109</code></li>
</ul>
</blockquote>
<h3 id="approach-1-动态规划">Approach 1: 动态规划</h3>
<p>本题目是典型的动态规划问题，因为我们计算到每个格子的路线数目可以通过，之前格子的可到达路线数目计算。具体计算迭代方式如下：</p>
<p>用<code>dp[m][n]</code>记录到达每个位置的路径数目（注意，agent只能右移或者下移）。
<span class="math display">\[
dp[i][j] = dp[i-1][j]+dp[i][j-1]
\]</span>
考虑边界条件，将<code>dp[0][j]</code>和<code>dp[i][0]</code>单独赋值为<code>1</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">uniquePaths</span>(<span class="params">self, m: <span class="built_in">int</span>, n: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            dp[<span class="number">0</span>][j] = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n):</span><br><span class="line">                dp[i][j] = dp[i-<span class="number">1</span>][j] + dp[i][j-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> dp[m-<span class="number">1</span>][n-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    m = <span class="number">7</span></span><br><span class="line">    n = <span class="number">3</span></span><br><span class="line">    solution=Solution().uniquePaths(m,n)</span><br><span class="line">    <span class="built_in">print</span>(solution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li><p>时间复杂度：<span
class="math display">\[O(mn)\]</span>。</p></li>
<li><p>空间复杂度：<span
class="math inline">\(O(mn)\)</span>，即为存储所有状态需要的空间。注意到<code>dp[i][j]</code>仅与第<code>i</code>行和第<code>i-1</code>行的状态有关，因此我们可以使用滚动数组代替代码中的二维数组，使空间复杂度降低为
<code>O(n)</code>。此外，由于我们交换行列的值并不会对答案产生影响，因此我们总可以通过交换<code>m</code>和<code>n</code>使得
<code>m</code> <span class="math inline">\(\leq\)</span>
<code>n</code>，这样空间复杂度降低至 <span
class="math inline">\(O(\min(m, n))\)</span>。</p></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2022/04/08/2022-04-08-Q63-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84II-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/04/08/2022-04-08-Q63-%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84II-%E4%B8%AD%E7%AD%89-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="post-title-link" itemprop="url">Q63-不同路径II-中等-动态规划</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-04-08 00:00:00" itemprop="dateCreated datePublished" datetime="2022-04-08T00:00:00+08:00">2022-04-08</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="不同路径-ii"><a
target="_blank" rel="noopener" href="https://leetcode-cn.com/problems/unique-paths-ii/">63. 不同路径
II</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p>一个机器人位于一个 m x n 网格的左上角 （起始点在下图中标记为 “Start”
）。</p>
<p>机器人每次只能向下或者向右移动一步。机器人试图达到网格的右下角（在下图中标记为
“Finish”）。</p>
<p>现在考虑网格中有障碍物。那么从左上角到右下角将会有多少条不同的路径？</p>
<p>网格中的障碍物和空位置分别用 1 和 0 来表示。</p>
</blockquote>
<blockquote>
<p><strong>Example 1:</strong></p>
<p>输入：obstacleGrid = [[0,0,0],[0,1,0],[0,0,0]] 输出：2 解释：3x3
网格的正中间有一个障碍物。 从左上角到右下角一共有 2 条不同的路径： 1.
向右 -&gt; 向右 -&gt; 向下 -&gt; 向下 2. 向下 -&gt; 向下 -&gt; 向右
-&gt; 向右</p>
</blockquote>
<blockquote>
<p><strong>Example 2:</strong></p>
<p>输入：obstacleGrid = [[0,1],[0,0]] 输出：1</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong></p>
<ul>
<li>m == obstacleGrid.length</li>
<li>n == obstacleGrid[i].length</li>
<li>1 &lt;= m, n &lt;= 100</li>
<li>obstacleGrid[i][j] 为 0 或 1</li>
</ul>
</blockquote>
<h3 id="approach-1-动态规划">Approach 1: 动态规划</h3>
<p>这道题在Q62的基础上设置了障碍物，思路比较简单，只需在动态规划迭代之前先判断知否存在障碍物即可。本题目是典型的动态规划问题，因为我们计算到每个格子的路线数目可以通过，之前格子的可到达路线数目计算。具体计算迭代方式如下：</p>
<p>用<code>dp[m][n]</code>记录到达每个位置的路径数目（注意，agent只能右移或者下移）。
<span class="math display">\[
dp[i][j] =
\begin{cases}
dp[i-1][j]+dp[i][j-1] ,&amp;obstacleGrid[i][j] = 1\\
0,&amp; obstacleGrid[i][j] = 0
\end{cases}
\]</span>
考虑边界条件，将<code>dp[0][j]</code>和<code>dp[i][0]</code>单独赋值为<code>1</code>。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">uniquePathsWithObstacles</span>(<span class="params">self, obstacleGrid</span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">        </span><br><span class="line">        m,n = <span class="built_in">len</span>(obstacleGrid),<span class="built_in">len</span>(obstacleGrid[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">if</span> obstacleGrid[m-<span class="number">1</span>][n-<span class="number">1</span>] == <span class="number">1</span> <span class="keyword">or</span> obstacleGrid[<span class="number">0</span>][<span class="number">0</span>] == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        dp = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(m)]</span><br><span class="line">        dp[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            <span class="keyword">if</span> obstacleGrid[i][<span class="number">0</span>] != <span class="number">1</span>:</span><br><span class="line">                dp[i][<span class="number">0</span>] = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            <span class="keyword">if</span> obstacleGrid[<span class="number">0</span>][j] != <span class="number">1</span>:</span><br><span class="line">                dp[<span class="number">0</span>][j] = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,m):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,n):</span><br><span class="line">                <span class="keyword">if</span> obstacleGrid[i][j] != <span class="number">1</span>:</span><br><span class="line">                    dp[i][j] = dp[i-<span class="number">1</span>][j] + dp[i][j-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dp[m-<span class="number">1</span>][n-<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    mat = [[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>]]</span><br><span class="line">    solution=Solution().uniquePathsWithObstacles(mat)</span><br><span class="line">    <span class="built_in">print</span>(solution)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li><p>时间复杂度：<span
class="math display">\[O(mn)\]</span>。</p></li>
<li><p>空间复杂度：<span
class="math inline">\(O(mn)\)</span>，即为存储所有状态需要的空间。注意到<code>dp[i][j]</code>仅与第<code>i</code>行和第<code>i-1</code>行的状态有关，因此我们可以使用滚动数组代替代码中的二维数组，使空间复杂度降低为
<code>O(n)</code>。此外，由于我们交换行列的值并不会对答案产生影响，因此我们总可以通过交换<code>m</code>和<code>n</code>使得
<code>m</code> <span class="math inline">\(\leq\)</span>
<code>n</code>，这样空间复杂度降低至 <span
class="math inline">\(O(\min(m, n))\)</span>。</p></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Txing"
      src="/images/my_photo.jpg">
  <p class="site-author-name" itemprop="name">Txing</p>
  <div class="site-description" itemprop="description">泛用人形决战型机器人博士</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">230</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/txing-casia" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;txing-casia" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.uomi.moe/" title="https:&#x2F;&#x2F;blog.uomi.moe" rel="noopener" target="_blank">驱逐舰患者</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://m.mepai.me/photographyer/u_5a68085ba15aa.html?tdsourcetag=s_pctim_aiomsg" title="https:&#x2F;&#x2F;m.mepai.me&#x2F;photographyer&#x2F;u_5a68085ba15aa.html?tdsourcetag&#x3D;s_pctim_aiomsg" rel="noopener" target="_blank">隐之-INF</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Txing</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">552k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">8:22</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
