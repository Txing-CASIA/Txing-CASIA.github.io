<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"txing-casia.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","width":240,"display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="泛用人形决战型机器人博士">
<meta property="og:type" content="website">
<meta property="og:title" content="Txing">
<meta property="og:url" content="https://txing-casia.github.io/page/10/index.html">
<meta property="og:site_name" content="Txing">
<meta property="og:description" content="泛用人形决战型机器人博士">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Txing">
<meta property="article:tag" content="Txing">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://txing-casia.github.io/page/10/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Txing</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Txing</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">欢迎来到 | 伽蓝之堂</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/12/2021-07-12-Reinforcement%20Learning%20-%20DRN-A%20Deep%20Reinforcement%20Learning%20Framework%20for%20News%20Recommendation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/12/2021-07-12-Reinforcement%20Learning%20-%20DRN-A%20Deep%20Reinforcement%20Learning%20Framework%20for%20News%20Recommendation/" class="post-title-link" itemprop="url">Reinforcement Learning | DRN: A Deep Reinforcement Learning Framework for News Recommendation</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-12 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-12T00:00:00+08:00">2021-07-12</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>4.6k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>4 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="drn-a-deep-reinforcement-learning-framework-for-news-recommendation">DRN:
A Deep Reinforcement Learning Framework for News Recommendation</h1>
<p>论文链接：http://www.personal.psu.edu/~gjz5038/paper/www2018_reinforceRec/www2018_reinforceRec.pdf</p>
<h2 id="主要内容">主要内容</h2>
<ul>
<li><p>针对新闻和用户动态特征的问题，目前的方法主要存在三个问题：</p>
<ul>
<li>模型<strong>只考虑当前奖励</strong>（例如CTR，点击转化率）</li>
<li>很少有模型考虑<strong>使用用户的反馈</strong>而不是点击/不点击的标签（例如用户反馈频率）</li>
<li>模型总是<strong>推荐相似的东西</strong>，会使得用户感到无聊</li>
</ul></li>
<li><p>一些典型方法：</p>
<ul>
<li>content based methods [19, 22, 33],</li>
<li>collaborative filtering based methods [11, 28, 34]</li>
<li>hybrid methods [12, 24, 25].</li>
<li>deep learning models [8, 45, 52]</li>
</ul></li>
<li><p>三个挑战：</p>
<ul>
<li>First, the dynamic changes in news recommendations are difficult to
handle.
<ul>
<li>First, news become outdated very fast.</li>
<li>Second, users’ interest on different news might evolve during
time.</li>
</ul></li>
<li>Second, current recommendation methods [23, 35, 36, 43] usually only
consider the click / no click labels or ratings as users’ feedback.</li>
<li>The third major issue of current recommendation methods is its
tendency to keep recommending similar items to users, which might
decrease users’ interest in similar topics.</li>
</ul></li>
<li><p>一般的强化学习推荐方法使用 <span
class="math display">\[\epsilon-greedy\]</span> 或者 Upper Confidence
Bound (UCB) 方法增加推荐的探索能力。</p>
<p>但是 <span class="math display">\[\epsilon-greedy\]</span>
会损害当前推荐的性能，而UCB在一件物品尝试了几次之后才能得到相对准确的奖励评估。因此需要更高效的探索方式。</p></li>
<li><p>通过使用 Dueling Bandit Gradient Descent (DBGD)
算法作为探索策略，它会随机从候选项的邻域或者候选项中选择推荐对象。这个探索策略可以避免推荐完全无关的信息，因此可以保持当前策略的精度。</p></li>
<li><p>模型框图：</p>
<p><img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210712-1.png" /></p></li>
<li><p>算法每1小时更新一次。Every one hour, the agent will use the log
in the memory to update its recommendation algorithm.</p></li>
<li><p>主要贡献：</p>
<ul>
<li>我们认为用户的活跃性有助于提高推荐的准确性，这可以提供额外的信息，而不是简单地使用用户点击标签。</li>
<li>应用了更有效的探索方法，避免了由经典探索方法(例如，<span
class="math display">\[\epsilon\]</span>-greedy和置信上限)引起的推荐准确度下降。</li>
<li>我们的系统已经在线部署在商业新闻推荐应用程序中。大量的离线和在线实验显示了我们方法的优越性能。</li>
</ul></li>
<li><p>一些推荐方法的特点：</p>
<ul>
<li>Content-based methods：统计内容的频率，推荐相似的内容；</li>
<li>Collaborative filtering
methods：使用过去的转化率或者其他类似用户的转化率，或者结合两者来预测；</li>
<li>Hybrid methods：提升用户画像模型；</li>
<li>deep learning models：建模复杂的用户-物品关系</li>
</ul></li>
</ul>
<h3 id="算法模型">算法模型：</h3>
<ul>
<li><p>算法步骤：</p>
<ol type="1">
<li><strong>PUSH</strong>: In each timestamp (t1, t2, t3, t4, t5, ...),
when a user sends a news request to the system, the recommendation agent
G will take the feature representation of the current user and news
candidates as input, and generate a top-k list of news to recommend L. L
is generated by combining the exploitation of current model (will be
discussed in Section 4.3) and exploration of novel items (will be
discussed in Section 4.5).</li>
<li><strong>FEEDBACK</strong>: User u who has received recommended news
L will give their feedback B by his clicks on this set of news.</li>
<li><strong>MINOR UPDATE</strong>: After each timestamp (e.g., after
timestamp t1), with the feature representation of the previous user u
and news list L, and the feedback B, agent G will update the model by
comparing the recommendation performance of exploitation network Q and
exploration network Q˜ (will be discussed in Section 4.5). If Q˜ gives
better recommendation result, the current network will be updated
towards Q˜ . Otherwise, Q will be kept unchanged. Minor update can
happen after every recommendation impression happens.</li>
<li><strong>MAJOR UPDATE</strong>: After certain period of timeTR(e.g.,
after timestamp t3), agent G will use the user feedback B and user
activeness stored in the memory to update the network Q. Here, we use
the experience replay technique [31] to update the network.
Specifically, agent G maintains a memory with recent historical click
and user activeness records. When each update happens, agent G will
sample a batch of records to update the model. Major update usually
happens after a certain time interval, like one hour, during which
thousands of recommendation impressions are conducted and their
feedbacks are collected.</li>
<li>Repeat step (1)-(4).</li>
</ol></li>
<li><p>特征设计：</p>
<ul>
<li><p><strong>News features</strong> includes 417 dimension one hot
features that describe whether certain property appears in this piece of
news, including headline, provider, ranking, entity name, category,
topic category, and click counts in last 1 hour, 6 hours, 24 hours, 1
week, and 1 year respectively.</p></li>
<li><p><strong>User features</strong> mainly describes the features
(i.e., headline, provider, ranking, entity name, category, and topic
category) of the news that the user clicked in 1 hour, 6 hours, 24
hours, 1 week, and 1 year respectively. There is also a total click
count for each time granularity. Therefore, there will be totally 413 ×
5 = 2065 dimensions.</p></li>
<li><p><strong>User news features</strong>. These 25-dimensional
features describe the interaction between user and one certain piece of
news, i.e., the frequency for the entity (also category, topic category
and provider) to appear in the history of the user’s readings.</p></li>
<li><p><strong>Context features</strong>. These 32-dimensional features
describe the context when a news request happens, including time,
weekday, and the freshness of the news (the gap between request time and
news publish time).</p></li>
</ul></li>
<li><p>模型框架，包含离线和在线部分</p></li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210712-3.png"
alt="Model framework" />
<figcaption aria-hidden="true">Model framework</figcaption>
</figure>
<p><img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210712-4.png"
alt="Q network" /> <span class="math display">\[
y_{s,a}=Q(s,a)=r_{immediate}+\gamma r_{future}\\
y_{s,a,t}=r_{a,t+1}+\gamma Q\big(s_{a,t+1},\arg \max_{a&#39;}
Q(s_{a,t+1},a&#39;;W_t);W_t&#39;\big)
\]</span></p>
<h3 id="user-activeness">User Activeness</h3>
<p><img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210712-3.png"
alt="User activeness estimation" /> <span class="math display">\[
\lambda(t)=\lim_{dt\rightarrow 0} \frac{\Pr\{t \leq T&lt;t+dt\mid T\geq
t \}}{d t}\\
S(t)=e^{-\int_0^\infty \lambda(x)dx}\\
T_0=\int_0^{\infty}S(t)dt
\]</span> the maximum user activeness is truncated to 1.</p>
<p>The click / no click label <span
class="math display">\[r_{click}\]</span> and the user activeness <span
class="math display">\[r_{active}\]</span> are combined as: <span
class="math display">\[
r_{total}=r_{click}+\beta r_{active}
\]</span></p>
<ul>
<li>网络框架</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210712-2.png"
alt="Exploration by Dueling Bandit Gradient Descent" />
<figcaption aria-hidden="true">Exploration by Dueling Bandit Gradient
Descent</figcaption>
</figure>
<p><span class="math display">\[\hat{L}\]</span> 首先使用概率交错方法从
<span class="math display">\[L\]</span> 和 <span
class="math display">\[\tilde{L}\]</span> 。大致就是首先随机从 <span
class="math display">\[L\]</span> 和 <span
class="math display">\[\tilde{L}\]</span>
选择推荐项，之后按照概率值更新网络 <span
class="math display">\[\tilde{Q}\]</span></p>
<p><span class="math display">\[
\Delta W=\alpha \cdot rand(-1,1)\cdot W\\
W&#39;=W+\eta \tilde{W}
\]</span></p>
<h2 id="总结">总结</h2>
<p>感觉整体框架还是很好理解的，针对任务的改进比较多，对强化学习框架的改动比较小。</p>
<p>两个网络的构造也类似于DQN中的target
network，输入的高维特征类比于输入的图像信息。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/08/2021-07-08-Reinforcement%20Learning%20-%20Option-critic%20architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/08/2021-07-08-Reinforcement%20Learning%20-%20Option-critic%20architecture/" class="post-title-link" itemprop="url">Reinforcement Learning | Option-critic Architecture</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-08 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-08T00:00:00+08:00">2021-07-08</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>5.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>5 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="option-critic-architecture">Option-critic Architecture</h1>
<p>论文链接：www.aaai.org/ocs/index.php/AAAI/AAAI17/paper/download/14858/14328</p>
<h2 id="主要内容">主要内容</h2>
<ul>
<li><p>分层强化学习自动学习时间抽象是很重要的</p></li>
<li><p>设计了基于策略梯度理论的option-critic方法来学习内部策略和option的终点约束。We
derive policy gradient theorems for options and propose a new
option-critic architecture capable of learning both the internal
policies and the termination conditions of options</p></li>
<li><p>在离散和连续的任务中都取得了好的表现。 discrete and continuous
environments</p></li>
<li><p>时间抽象允许表示关于发生在不同时间尺度上的行动过程的知识。Temporal
abstraction allows representing knowledge about courses of action that
take place at different time scales.</p></li>
<li><p>Discovering temporal abstractions autonomously
成为了一个持续了15年的研究主题</p></li>
<li><p>大部分的工作致力于发现子目标，并在后续的策略学习中实现它们。这个其实就是分层结构，并且和肌肉骨骼的运动控制很像。The
majority of the existing work has focused on finding subgoals (useful
states that an agent should reach) and subsequently learning policies to
achieve them</p></li>
<li><p>问题在于求解子目标时的探索时间和计算开销非常大。Additionally,
learning policies associated with subgoals can be expensive in terms of
data and computation time; in the worst case, it can be as expensive as
solving the entire task.</p></li>
<li><p>本文的方法模糊了发现option和学习option的界限，</p></li>
<li><p>In contrast, we show that our approach is capable of successfully
learning options within a single task without incurring any slowdown and
while still providing benefits for <strong>transfer
learning</strong>.（看着有点像我的Speed-accuracy
Trade-off那篇文章，但它的是直接说在抢一学习上有好处的）</p></li>
<li><p>core ideas：the <strong>intra-option policy</strong> and
<strong>termination gradient theorems</strong></p></li>
<li><p>方法需要的特殊条件少。As opposed to other methods, we only need
to specify <strong>the number of desired options</strong>; it is
<strong>not</strong> necessary to have <strong>subgoals</strong>,
<strong>extra rewards</strong>, <strong>demonstrations</strong>,
<strong>multiple problems</strong> or any other <strong>special
accommodations</strong> (however, the approach can take advantage of
pseudo-reward functions if desired)</p></li>
</ul>
<h3 id="option-framework">Option Framework</h3>
<ul>
<li>option框架假设对于option <span class="math display">\[\omega\in
\Omega\]</span> 由三元组 <span
class="math display">\[(I_{\omega},\pi_{\omega},\beta_{\omega})\]</span>
组成。
<ul>
<li><span class="math display">\[I_{\omega} \subseteq S\]</span>
是初始的状态集合</li>
<li><span class="math display">\[\pi_{\omega}\]</span>
是intra-option策略</li>
<li><span class="math display">\[\beta_{\omega}: S \rightarrow
[0,1]\]</span> 是终止函数</li>
</ul></li>
<li>当使用option框架时， MDP就变成了Semi-MDP，它有相应的最优值函数<span
class="math display">\[V_{\Omega}(s)\]</span> 和option-value函数 <span
class="math display">\[Q_{\Omega}(s,\omega)\]</span>
。所谓的Semi-MDP就是指从状态s到下一个状态s‘要经过 <span
class="math display">\[\tau\]</span>
步的MDP，大致就是状态之间存在时间上的不连续。</li>
<li>通过一些针对MDP的算法实现多个option并行地学习，这就是
<strong>intra-option learning</strong> 的主要思路</li>
<li>接下来就是要实现两个关键任务：learning <strong>option
policies</strong> and <strong>termination functions</strong></li>
<li>算法流程：一个外部的策略 <span
class="math display">\[\pi_{\Omega}\]</span> 选择option来执行控制，
intra-option policy <span class="math display">\[\pi_{\omega}\]</span>
开始执行，直到终点（用终点函数来判断停止执行）</li>
<li>定义option-value function can be written as:</li>
</ul>
<p><span class="math display">\[
Q_{\Omega}(s,\omega)=\sum_a \pi_{\omega,\theta}(a \mid
s)Q_{U}(s,\omega,a)
\]</span></p>
<p>其中 <span class="math display">\[Q_{U}(s,\omega,a)\]</span>
是在state-option对下执行行为的评估值。</p>
<p><span class="math display">\[
Q_{U}(s,\omega,a)=r(s,a)+\gamma\sum_{s&#39;}P(s&#39; \mid
s,a)U(\omega,s&#39;)
\]</span></p>
<p>注意 <span class="math display">\[(s,\omega)\]</span>
组导致了一个扩张的状态空间 an augmented state space, cf. (Levy and
Shimkin 2011)</p>
<p><span class="math display">\[U: \Omega \times S\rightarrow
\mathbb{R}\]</span> 是 the option-value function upon arrival，The value
of executing <span class="math display">\[\omega\]</span> upon entering
a state <span class="math display">\[s&#39;\]</span> is given by:</p>
<p><span class="math display">\[
U(\omega,s&#39;)=(1-\beta_{\omega,\vartheta}(s&#39;))Q_{\Omega}(s&#39;,\omega)+\beta_{\omega,\vartheta}(s&#39;)V_{\Omega}(s&#39;)
\]</span></p>
<p>如果option <span class="math display">\[\omega_t\]</span> 在时刻 t
被初始化并被执行，此时状态为 <span class="math display">\[s_t\]</span>
，然后在1步之后，状态转移到 <span
class="math display">\[(s_{t+1},\omega_{t+1})\]</span> 的概率是：</p>
<p><span class="math display">\[
P(s_{t+1},\omega_{t+1} \mid s_t,\omega_t)=\sum_a
\pi_{\omega_t,\theta}(a|s_t)P(s_{t+1} \mid s_t,a)\\
\big((1-\beta_{\omega_t,\vartheta}(s_{t+1}))1_{\omega_t=\omega_{t+1}}+\beta_{\omega_t,\vartheta}(s_{t+1})\pi_{\Omega}(\omega_{t+1}
\mid s_{t+1})\big)
\]</span></p>
<p>显然，给出计算过程是均匀的。在温和的条件下，由于选项到处可用，它实际上是遍历的，并且在
state-option 对上存在唯一的平稳分布。</p>
<p>接下来计算期望累积回报关于intra-option策略的参数 <span
class="math display">\[\theta\]</span>
的梯度，假设它是随机的可微分的，我们得到</p>
<p><span class="math display">\[
\frac{\partial Q_{\Omega}(s,\omega)}{\partial \theta}=\Bigg(\sum_a
\frac{\partial \pi_{\omega,\theta}(a \mid s)}{\partial
\theta}Q_{U}(s,\omega,a)\Bigg)\\
+\sum_a\pi_{\omega,\theta}(a \mid s)\sum_{s&#39;} \gamma
P(s&#39;|s,a)\frac{\partial U(\omega,s&#39;)}{\partial \theta}
\]</span></p>
<p><strong>Theorem 1</strong> (<strong>Intra-Option Policy Gradient
Theorem</strong>). Given a set of Markov options with stochastic
intra-option policies differentiable in their parameters <span
class="math display">\[\theta\]</span>, the gradient of the expected
discounted return with respect to <span
class="math display">\[\theta\]</span> and initial condition <span
class="math display">\[(s_0,\omega_0)\]</span> is:</p>
<p><span class="math display">\[
\sum_{s,\omega} \mu_{\Omega}(s,\omega \mid s_0,\omega_0)\sum_a
\frac{\partial \pi_{\omega,\theta}(a \mid s)}{\partial \theta}
Q_U(s,\omega,a)
\]</span></p>
<p>其中 <span class="math display">\[\mu_{\Omega}\]</span>
是状态-选项对的折扣权重</p>
<p><span class="math display">\[
\mu_{\Omega}(s,\omega \mid s_0,\omega_0)=\sum_{t=0}^{\infty}\gamma^t
P(s_t=s,\omega_t=\omega \mid s_0,\omega_0)
\]</span></p>
<p>下面计算终点函数的梯度，假设时间是随机化的并且可微的关于参数 <span
class="math display">\[\vartheta\]</span></p>
<p><span class="math display">\[
\frac{\partial Q_{\Omega}(s,\omega)}{\partial \vartheta} = \sum_a
\pi_{\omega,\theta}(a \mid s)\sum_{s&#39;}\gamma P(s&#39; \mid s,a)
\frac{\partial U(\omega,s&#39;)}{\partial \vartheta}
\]</span></p>
<p>关于 <span class="math display">\[U\]</span> 的梯度，可以结合又是函数
<span class="math display">\[A_{\Omega}\]</span> 来计算：</p>
<p><span class="math display">\[
\begin{align}
\frac{\partial U(\omega,s&#39;)}{\partial \vartheta} =&amp;
-\frac{\partial \beta_{\omega,\vartheta}(s&#39;)}{\partial \vartheta}
A_{\Omega}(s&#39;,\omega) \\
&amp;+ \gamma\sum_{\omega&#39;} \sum_{s&#39;&#39;}
P(s&#39;&#39;,\omega&#39; \mid s&#39;,\omega)\frac{\partial
U(\omega&#39;,s&#39;&#39;)}{\partial \vartheta}
\end{align}
\]</span></p>
<p>其中，优势函数 <span class="math display">\[A_{\Omega}(s&#39;,\omega)
= Q_{\Omega}(s&#39;,\omega)-V_{\Omega}(s&#39;)\]</span> .</p>
<p><strong>Theorem 2</strong> (<strong>Termination Gradient
Theorem</strong>). Given a set of Markov options with stochastic
termination functions differentiable in their parameters <span
class="math display">\[\vartheta\]</span>, the gradient of the expected
discounted return objective with respect to <span
class="math display">\[\vartheta\]</span> and the initial condition
<span class="math display">\[(s_1, \omega_0)\]</span> is:</p>
<p><span class="math display">\[
-\sum_{s&#39;,\omega}\mu_{\Omega}(s&#39;,\omega \mid
s_1,\omega_0)\frac{\partial \beta_{\omega,\vartheta}(s&#39;)}{\partial
\vartheta}A_{\Omega}(s&#39;,\omega)
\]</span></p>
<p>其中 <span class="math display">\[\mu_{\Omega}(s&#39;,\omega \mid
s_1,\omega_0)\]</span> 是状态-选项对 <span
class="math display">\[(s_1,\omega_0)\]</span> 的折扣权重</p>
<p><span class="math display">\[
\mu_{\Omega}(s,\omega \mid s_1,\omega_0)=\sum_{t=0}^{\infty} \gamma^t
P(s_{t+1}=s,\omega_t=\omega|s_1,\omega_0)
\]</span></p>
<ul>
<li>算法结构：</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210709-1.png"
alt="算法结构" />
<figcaption aria-hidden="true">算法结构</figcaption>
</figure>
<ul>
<li>算法伪代码：</li>
</ul>
<figure>
<img
src="https://raw.githubusercontent.com/txing-casia/txing-casia.github.io/master/img/20210709-2.png"
alt="算法伪代码" />
<figcaption aria-hidden="true">算法伪代码</figcaption>
</figure>
<ul>
<li>算法的问题：假设了所有的options适用于所有的地方。Perhaps the biggest
remaining limitation of our work is the assumption that all options
apply everywhere.</li>
</ul>
<h2 id="总结">总结</h2>
<p>option-critic算法框架是典型的HRL实现方式之一，上下两层都使用策略梯度优化的证明过程看着还是很不错的。具体公式和推导可以参考原文以及附件。相关代码可以在paper
with code找出来看看，估计会比FuN的结构的HRL更容易复现吧。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/06/2021-07-06-Reinforcement%20Learning%20-%20Option%20Discovery%20in%20Hierarchical%20Reinforcement%20Learning%20using%20Spatio-Temporal%20Clustering%20-%20%E5%89%AF%E6%9C%AC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/06/2021-07-06-Reinforcement%20Learning%20-%20Option%20Discovery%20in%20Hierarchical%20Reinforcement%20Learning%20using%20Spatio-Temporal%20Clustering%20-%20%E5%89%AF%E6%9C%AC/" class="post-title-link" itemprop="url">Reinforcement Learning | Option Discovery in Hierarchical Reinforcement Learning using Spatio-Temporal Clustering</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-06 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-06T00:00:00+08:00">2021-07-06</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.8k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="option-discovery-in-hierarchical-reinforcement-learning-using-spatio-temporal-clustering">Option
Discovery in Hierarchical Reinforcement Learning using Spatio-Temporal
Clustering</h1>
<p>论文链接：https://arxiv.org/pdf/1605.05359v3.pdf</p>
<h2 id="主要内容">主要内容</h2>
<ul>
<li><p>本文旨在提出一个自动的技能获取框架，可以分层描述任务，对状态抽象以及在抽象状态之间拓展行为。这样的分层结构可以加速学习过程</p></li>
<li><p>使用动态系统中寻找状态空间中亚稳态区域和抽象状态的思想。We use
ideas from dynamical systems to find metastable regions in the state
space and associate them with abstract states</p></li>
<li><p>使用空间聚类算法PCCA+，做状态抽象，形成抽象的状态量</p></li>
<li><p>These skills are independent of the learning task and can be
efficiently reused across a variety of tasks defined over the same
model</p></li>
<li><p>The core idea of hierarchical reinforcement learning is to break
down the reinforcement learning problem into subtasks through a
hierarchy of abstractions.</p></li>
<li><p>自动发现不同的技能，这是一个小领域。Our focus in this paper is to
present our framework on automated discovery of skills</p>
<ul>
<li>定义状态空间中的瓶颈状态，这些状态被划分为集合，两组罕见状态之间的转换会在这种转换的相应点引入瓶颈状态。达到这种瓶颈状态的策略被缓存为选项
(McGovern and Barto 2001).</li>
<li>使用因式分解来表示状态空间中存在的结构，识别很少变化的动作序列，并把这些序列作为选项被缓存起来
(Hengst 2004)</li>
<li>使用智能体与环境交互的图表征，并使用中间中心性度量来识别子任务</li>
<li>使用聚类方法(光谱或其他方法)分离出MDP的不同强关联成分，并识别连接不同聚类的瓶颈
(Menache, Mannor, and Shimkin 2002).</li>
</ul></li>
<li><p>文章的目标是在没有任何先验知识的情况下获得技能和发现抽象</p></li>
<li><p>使用SMDP Q-Learning，Intra Option Q-Learning</p></li>
<li><p>主要贡献：</p>
<ul>
<li>使用PCCA+抽象MDP的state</li>
<li>设计一种组合option的方式</li>
<li>大状态空间下，不好使用，设计一种聚合的状态空间</li>
</ul></li>
<li><p>Option框架：The option framework is one of the formalisations
used to represent hierarchies in RL (Sutton, Precup, and Singh 1999).
Formally, an option is a tuple <span class="math inline">\(O = (I, \mu,
\beta)\)</span> here:</p>
<ul>
<li><span class="math inline">\(I\)</span> is the initiation set: a set
of states from which the action can be activated</li>
<li><span class="math inline">\(\mu\)</span> is a policy function where
µ(s, a) represents the preference value given to action a in state s
following option O.</li>
<li><span class="math inline">\(\beta\)</span> is the termination
function: When an agent enters a state s while following option O, the
option could be terminated with a probability <span
class="math inline">\(\beta(s)\)</span>.</li>
</ul></li>
<li><p>Semi-Markov Decision Process (SMDP)</p></li>
</ul>
<p><span class="math display">\[
Q(s,o)\leftarrow Q(s,o)+\alpha[r+\gamma^k \max_{a\in O} Q(s,a)-Q(s,o)]
\]</span></p>
<ul>
<li><p>SMDP学习方法的一个主要缺点是，在了解其结果之前，选项需要完全执行到终止。</p></li>
<li><p>Perron Cluster Analysis (PCCA+)</p></li>
</ul>
<h2 id="总结">总结</h2>
<p>主要工作是利用一个谱聚类算法自动地寻找option，算是options类算法的变体。option可以赋予策略语义特征，可以看看原始文章。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/05/2021-07-05-ACM%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%A4%84%E7%90%86python%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/05/2021-07-05-ACM%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%A4%84%E7%90%86python%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93/" class="post-title-link" itemprop="url">ACM数据格式处理python方法总结</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-05 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-05T00:00:00+08:00">2021-07-05</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>4.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>4 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="acm数据格式处理python方法总结">ACM数据格式处理python方法总结</h1>
<h2 id="oj在线编程常见输入输出练习场">OJ在线编程常见输入输出练习场</h2>
<p>在线测试网址：https://ac.nowcoder.com/acm/contest/5652#question</p>
<p>华为机考模拟试题：https://www.nowcoder.com/ta/huawei</p>
<h3 id="总结">总结：</h3>
<ul>
<li><p>数据行数具体是多少不重要，可通过while来解决，每行数据长度是否已知也无所谓。</p></li>
<li><p>熟悉sys，map，try-except的具体使用框架和方式</p></li>
<li><p>熟悉split()，strip()函数的使用方式</p></li>
<li><p>一些字符相关的函数：</p>
<ul>
<li>字符转化为asc-ii码函数（ord('a')）可以用来判断是否大小写/数字</li>
</ul></li>
<li><p>字符串.isalnum() 所有字符都是数字或者字母，为真返回
Ture，否则返回 False。</p>
<ul>
<li>字符串.isalpha() 所有字符都是字母，为真返回 Ture，否则返回
False。</li>
<li>字符串.isdigit() 所有字符都是数字，为真返回 Ture，否则返回
False。</li>
<li>字符串.islower() 所有字符都是小写，为真返回 Ture，否则返回
False。</li>
<li>字符串.isupper() 所有字符都是大写，为真返回 Ture，否则返回
False。</li>
<li>字符串.istitle() 所有单词都是首字母大写，为真返回 Ture，否则返回
False。</li>
<li>字符串.isspace() 所有字符都是空白字符，为真返回 Ture，否则返回
False。</li>
</ul></li>
<li><p>进制转换：</p>
<ul>
<li>16进制转为10进制：int(num,16)</li>
<li>2进制转为10进制：int(num,2)</li>
<li>8进制转为10进制：int(num,8)</li>
<li>10进制转为16进制：hex(num)</li>
<li>10进制转2进制：bin(num)</li>
<li>10进制转8进制：oct(num)</li>
</ul></li>
<li><p>输出分割方式：</p>
<ul>
<li>按照空格分割：print(a, end=' ')</li>
<li>按照行分割：print(a) or print(a, end='')</li>
</ul></li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入多行字符串转换为二维矩阵</span></span><br><span class="line">num=<span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line"><span class="comment"># 创建已知大小的二维矩阵</span></span><br><span class="line">T = [[<span class="number">0</span>]*num <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num)]</span><br><span class="line">i=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">	<span class="comment"># 字符串分割！！！</span></span><br><span class="line">    T[i][:]=<span class="built_in">list</span>(<span class="string">&#x27;&#x27;</span>.join(line.strip().split()))</span><br><span class="line">    i+=<span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>读入一个二维矩阵：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取字符举证</span></span><br><span class="line">a = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin: </span><br><span class="line">    a.append(line.split())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取数字矩阵</span></span><br><span class="line">a = []</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin: </span><br><span class="line">    a.append(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,line.split())))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>()</span><br><span class="line"><span class="comment"># print(&#x27; &#x27;.join(sorted(input().split())))</span></span><br><span class="line"><span class="comment"># 连续的数字不被拆开</span></span><br><span class="line"><span class="comment"># a= list(input().split()) # 可以不加list()</span></span><br><span class="line">a = <span class="built_in">input</span>().split()</span><br><span class="line"><span class="comment"># 去除字符串数组中多余的括号</span></span><br><span class="line">a[<span class="number">0</span>]=a[<span class="number">0</span>].replace(<span class="string">&#x27;[&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">a[-<span class="number">1</span>]=a[-<span class="number">1</span>].replace(<span class="string">&#x27;]&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">int</span>(a[<span class="number">1</span>]))</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>已知数据行数，已知每行长度</strong>：外加循环或者判断条件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a,b = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>))</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>未知数据行数，未知每行长度</strong>：使用sys库提取每行数据，结合strip()（去除
）和split()（分割函数，方便提取元素）函数实现数组建立</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>.join(<span class="built_in">sorted</span>(line.strip().split())))</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>已知行数，未知每行长度</strong>：行数可以不储存不使用，每行未知长度数据，可以用下面语句直接变成一个数组</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())) <span class="comment"># a直接就是整数数组</span></span><br></pre></td></tr></table></figure>
<p>下面给出了几个输入输出案例（包括<strong>数字</strong>和<strong>字符串</strong>部分）：</p>
<h3 id="ab1">1. A+B(1)</h3>
<p>输入包括两个正整数a,b(1 &lt;= a, b &lt;= 10^9),输入数据包括多组。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        a,b = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line">        <span class="comment"># a,b = map(int,input().split())</span></span><br><span class="line">        <span class="built_in">print</span>(a + b)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span> </span><br></pre></td></tr></table></figure>
<h3 id="ab2">2. A+B(2)</h3>
<p>输入第一行包括一个数据组数t(1 &lt;= t &lt;= 100)
接下来每行包括两个正整数a,b(1 &lt;= a, b &lt;= 10^9)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    num = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    <span class="comment"># num = int(sys.stdin.readline().strip()) # 读取一整行输入，strip()去掉末尾空行或空格，int()转换为整数形式</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        a , b = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line">        <span class="built_in">print</span>(a + b)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">input</span>()</span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, line.split())))</span><br></pre></td></tr></table></figure>
<h3 id="ab3">3. A+B(3)</h3>
<p>输入包括两个正整数a,b(1 &lt;= a, b &lt;= 10^9),输入数据有多组,
如果输入为0 0则结束输入</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        a , b = <span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>))</span><br><span class="line">        <span class="keyword">if</span> a != <span class="number">0</span> <span class="keyword">and</span> b != <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(a + b)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="ab4">4. A+B(4)</h3>
<p>输入数据包括多组。 每组数据一行,每行的第一个整数为整数的个数n(1 &lt;=
n &lt;= 100), n为0的时候结束输入。
接下来n个正整数,即需要求和的每个正整数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        a = <span class="built_in">input</span>().split(<span class="string">&#x27; &#x27;</span>) <span class="comment"># a是字符数组</span></span><br><span class="line">        <span class="comment"># a = sys.stdin.readline().split(&#x27; &#x27;)</span></span><br><span class="line">        <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">int</span>(a[<span class="number">0</span>]) != <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="built_in">len</span>(a)):</span><br><span class="line">                <span class="built_in">sum</span> += <span class="built_in">int</span>(a[i])</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().split())) <span class="comment"># a直接就是整数数组</span></span><br><span class="line">        <span class="keyword">if</span> a[<span class="number">0</span>] != <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">sum</span>(a[<span class="number">1</span>:]))</span><br><span class="line">        <span class="keyword">else</span>: </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>使用sys库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, line.strip().split()))[<span class="number">0</span>]!=<span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, line.strip().split()[<span class="number">1</span>:])))</span><br></pre></td></tr></table></figure>
<h3 id="ab5">5. A+B(5)</h3>
<p>输入的第一行包括一个正整数t(1 &lt;= t &lt;= 100), 表示数据组数。
接下来t行, 每行一组数据。 每行的第一个整数为整数的个数n(1 &lt;= n &lt;=
100)。 接下来n个正整数, 即需要求和的每个正整数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    nums = <span class="built_in">int</span>(<span class="built_in">input</span>())</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(nums):</span><br><span class="line">        a = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>,<span class="built_in">input</span>().split()))</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">sum</span>(a[<span class="number">1</span>:]))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>一个更简洁的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        numlist = <span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split()))</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(numlist) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="built_in">sum</span>(numlist[<span class="number">1</span>:]))</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<h3 id="ab6">6. A+B(6)</h3>
<p>输入数据有多组, 每行表示一组输入数据。
每行的第一个整数为整数的个数n(1 &lt;= n &lt;= 100)。 接下来n个正整数,
即需要求和的每个正整数。 每组数据输出求和的结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, line.strip().split()[<span class="number">1</span>:])))</span><br></pre></td></tr></table></figure>
<h3 id="ab7">7. A+B(7)</h3>
<p>输入数据有多组, 每行表示一组输入数据。
每行不定有n个整数，空格隔开。(1 &lt;= n &lt;= 100)。
每组数据输出求和的结果</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, line.strip().split())))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">sum</span>(<span class="built_in">list</span>(<span class="built_in">map</span>(<span class="built_in">int</span>, <span class="built_in">input</span>().strip().split()))))</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串排序1">8. 字符串排序(1)</h3>
<p>输入有两行，第一行n 第二行是n个空格隔开的字符串
输出一行排序后的字符串，空格隔开，无结尾空格</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="built_in">input</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>.join(<span class="built_in">sorted</span>(<span class="built_in">input</span>().split())))</span><br><span class="line"><span class="comment"># sorted(num,reverse=Ture) # 逆序排序</span></span><br></pre></td></tr></table></figure>
<h3 id="字符串排序2">9. 字符串排序(2)</h3>
<p>多个测试用例，每个测试用例一行。 每行通过空格隔开，有n个字符，n＜100
对于每组测试用例，输出一行排序过的字符串，每个字符串通过空格隔开</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27; &#x27;</span>.join(<span class="built_in">sorted</span>(line.strip().split())))</span><br></pre></td></tr></table></figure>
<h3 id="字符串排序3">10. 字符串排序(3)</h3>
<p>多个测试用例，每个测试用例一行。 每行通过,隔开，有n个字符，n＜100
对于每组用例输出一行排序后的字符串，用','隔开，无结尾空格</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> sys.stdin:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;,&#x27;</span>.join(<span class="built_in">sorted</span>(line.strip().split(<span class="string">&#x27;,&#x27;</span>))))</span><br></pre></td></tr></table></figure>
<h3 id="自测本地通过但是提交为0">11. 自测本地通过，但是提交为0</h3>
<p>每年前几场在线笔试编程题的时候，总有同学询问为什么我本地测试通过，自测也通过，提交代码系统却返回通过率0。
打开以下链接可以查看正确的代码
https://ac.nowcoder.com/acm/contest/5657#question
这不是系统的错，可能是因为</p>
<ol type="1">
<li>你对题目理解错了，你的代码只过了样例或你自己的数据</li>
<li>你的代码逻辑有问题，你的代码只过了样例或你自己的数据</li>
</ol>
<p>总之就是你的代码只是过了样例和自测数据，后台的测试数据你根本不可见，要多自己思考。</p>
<p>这个题目如果你提交后通过率为0，又觉得自己代码是正确的，可以 点击查看
通过的代码</p>
<p>谨记：
当你笔试的时候怀疑系统或者题目数据有问题的时候请务必先怀疑自己的代码!</p>
<p>请帮忙把这个练习专题发给你的朋友同学吧，感谢感谢</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/05/2021-07-05-HJ26%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F-%E4%B8%AD%E7%AD%89-%E5%AD%97%E7%AC%A6%E4%B8%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/05/2021-07-05-HJ26%20%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8E%92%E5%BA%8F-%E4%B8%AD%E7%AD%89-%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="post-title-link" itemprop="url">HJ26 字符串排序-中等-字符串</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-05 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-05T00:00:00+08:00">2021-07-05</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>700</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="hj26-字符串排序"><a
target="_blank" rel="noopener" href="https://www.nowcoder.com/practice/5190a1db6f4f4ddb92fd9c365c944584?tpId=37&amp;&amp;tqId=21249&amp;rp=1&amp;ru=/ta/huawei&amp;qru=/ta/huawei/question-ranking">HJ26
字符串排序</a></h4>
<h2 id="question">Question</h2>
<blockquote>
<p><strong>规则 1</strong> ：英文字母从 A 到 Z 排列，不区分大小写。</p>
<p>如，输入： Type 输出： epTy</p>
<p><strong>规则 2</strong>
：同一个英文字母的大小写同时存在时，按照输入顺序排列。</p>
<p>如，输入： BabA 输出： aABb</p>
<p><strong>规则 3</strong> ：非英文字母的其它字符保持原来的位置。</p>
<p>如，输入： By?e 输出： Be?y</p>
<p>注意有多组测试数据，即输入有多行，每一行单独处理（换行符隔开的表示不同行）</p>
<p>输入描述： - 输入字符串</p>
<p>输出描述： - 输出字符串</p>
<p>示例1 输入：A Famous Saying: Much Ado About Nothing (2012/8). 输出：A
aaAAbc dFgghh: iimM nNn oooos Sttuuuy (2012/8).</p>
</blockquote>
<h3 id="approach">Approach</h3>
<ul>
<li>sorted(iterable,str.upper)就可以实现：
<ul>
<li>1）字符由A到Z的排序</li>
<li>2）能够实现同字母（A与a算同字母），由输入先后书序排列。</li>
</ul></li>
<li>str.isalpha实现的是如果字符串至少有一个字符并且所有字符都是字母则返回
True，否则返回 False。</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        s = <span class="built_in">input</span>()</span><br><span class="line">        a = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> s:</span><br><span class="line">            <span class="keyword">if</span> i.isalpha():</span><br><span class="line">                a += i</span><br><span class="line">        b = <span class="built_in">sorted</span>(a, key=<span class="built_in">str</span>.upper)</span><br><span class="line">        index = <span class="number">0</span></span><br><span class="line">        d = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(s)):</span><br><span class="line">            <span class="keyword">if</span> s[i].isalpha():</span><br><span class="line">                d += b[index]</span><br><span class="line">                index += <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                d += s[i]</span><br><span class="line">        <span class="built_in">print</span>(d)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure>
<p><strong>复杂度分析</strong></p>
<ul>
<li>时间复杂度：<span
class="math display">\[O(N)\]</span>，N是序列长度。</li>
<li>空间复杂度：<span
class="math display">\[O(1)\]</span>。常数个变量。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/07/01/2021-07-01-Reinforcement%20Learning%20-%20Hierarchical%20Deep%20Reinforcement%20Learning%20for%20Continuous%20Action%20Control/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/01/2021-07-01-Reinforcement%20Learning%20-%20Hierarchical%20Deep%20Reinforcement%20Learning%20for%20Continuous%20Action%20Control/" class="post-title-link" itemprop="url">Reinforcement Learning | Hierarchical Deep Reinforcement Learning for Continuous Action Control</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-01 00:00:00" itemprop="dateCreated datePublished" datetime="2021-07-01T00:00:00+08:00">2021-07-01</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1
id="hierarchical-deep-reinforcement-learning-for-continuous-action-control">Hierarchical
Deep Reinforcement Learning for Continuous Action Control</h1>
<p>论文链接：https://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&amp;arnumber=8310962&amp;tag=1</p>
<h2 id="背景">背景</h2>
<p>机器人连续行为空间的控制是一个难题，尤其是在应对复合任务的时候。</p>
<ul>
<li>In addition, many works introduced linear function approximations to
enhance the generalization ability of algorithms [5], [6] to handle more
complex environments.</li>
<li>Moreover, learning agents also need to consider many physical
factors to keep the robot moving smoothly</li>
</ul>
<h2 id="主要内容">主要内容</h2>
<ul>
<li><p>hierarchical-deep deterministic policy gradient (h-DDPG)</p></li>
<li><p>第一层使用多个actor网络学习基本技能，第二层学习复合的技能。</p></li>
<li><p>Results show that the proposed algorithm can successfully learn
high performance basic skills and compound skills simultaneously.
Results also show that its performance in solving compound tasks in the
three scenarios outperform discrete action deep reinforcement learning
algorithm.</p></li>
<li><p>Contributions:</p>
<ul>
<li><ol type="1">
<li>learn multiple basic skills at the same time;</li>
</ol></li>
<li><ol start="2" type="1">
<li>learn compound skills to solve compound tasks by reusing basic
skills;</li>
</ol></li>
<li><ol start="3" type="1">
<li>handle the above two kinds of skill learning within the same process
and time scale.</li>
</ol></li>
</ul></li>
<li><p>一些方法：</p>
<ul>
<li>deterministic policy gradients [18], [26], [27]</li>
<li>stochastic policy gradients [28], [29]</li>
<li>trust region policy optimization [30]</li>
<li>Some work has also been done to integrate modelbased methods to
accelerate learning in continuous action spaces [31]</li>
</ul></li>
<li><p>分层强化学习：</p>
<ul>
<li>Various works on hierarchical reinforcement learning exist [33],
[34]</li>
<li>including work considering deep architectures [35], [36]</li>
<li>Work in <strong>[36]</strong> is focuses on finding the best
hierarchical structure of the tasks with clustering methods, and is
mainly concerned with how to decompose tasks</li>
</ul></li>
<li><p>Most recent work on deep hierarchical reinforcement learning can
be found in [37] and [38].</p></li>
<li><p>针对图像输入的DDPG，更改了conv网络的激活函数，思想来自the mlpconv
layer。可以减少网络参数数量</p></li>
<li><p>基本能力的定义：Basic tasks are fundamentally nontask specific
and rather are tied to the physical capabilities of the robot, such as
rotating a wheel or bending a joint to a specific direction.</p></li>
<li><p>符合任务定义：Conversely, compound tasks are defined to be tasks
that can only be achieved by combining different patterns.</p></li>
</ul>
<h2 id="总结">总结</h2>
<p>这篇文章讲述并不是很清晰，也缺少理论证明，感觉最大的贡献就是使用了多个actor网络学习基础技能，但这个也是比较典型的分层强化学习思路，和option类似。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/06/29/2021-06-28-Reinforcement%20Learning%20-%20Proximal%20Policy%20Optimization%20Algorithms/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/29/2021-06-28-Reinforcement%20Learning%20-%20Proximal%20Policy%20Optimization%20Algorithms/" class="post-title-link" itemprop="url">Reinforcement Learning | Proximal Policy Optimization Algorithms</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-06-29 00:00:00" itemprop="dateCreated datePublished" datetime="2021-06-29T00:00:00+08:00">2021-06-29</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>759</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="proximal-policy-optimization-algorithms">Proximal Policy
Optimization Algorithms</h1>
<p>论文链接：https://arxiv.org/pdf/1707.06347.pdf</p>
<h2 id="背景">背景</h2>
<p>基于策略梯度和 trust region policy optimization
(TRPO)方法，提出multiple epochs of minibatch updates的方式，解决了Policy
Gradient算法中步长难以确定的问题。而一般策略梯度方法 perform one
gradient update per data sample。</p>
<h2 id="主要内容">主要内容</h2>
<ul>
<li>目的是实现数据高效和鲁棒性（data efficient, and robust）</li>
<li>使用 first-order optimization</li>
<li>PPO有两种主要变体：PPO-penalty和PPO-clip。
<ul>
<li>PPO-Penalty
近似解决了像TRPO这样的受KL约束的更新，但是对目标函数中的KL偏离进行了惩罚，而不是使其成为硬约束，并且在训练过程中自动调整了惩罚系数，以便对其进行适当缩放。</li>
<li>PPO-Clip 在目标中没有KL散度项，也没有任何约束。
取而代之的是依靠对目标函数的专门裁剪来消除新政策消除旧政策的激励。</li>
</ul></li>
</ul>
<p><span class="math display">\[
L(s,a,\theta_k,\theta)=\min
\Bigg(\frac{\pi_{\theta}(a|s)}{\pi_{\theta_k}(a|s)}A^{\pi_k}(s,a),
\text{clip}\bigg(\frac{\pi_{\theta}(a|s)}{\pi_{\theta_k}(a|s)},1-\epsilon,1+\epsilon
\bigg)A^{\pi_k}(s,a) \Bigg)
\]</span></p>
<h2 id="总结">总结</h2>
<p>相比于TRPO，PPO缺失比较简单、直接，特别是PPO2（PPO-Clip），通过裁减损失哈数的方式保证了更新的稳定。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://txing-casia.github.io/2021/05/20/2021-05-20-%E5%AE%89%E8%A3%85Atari%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E6%8A%A5%E9%94%99/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/my_photo.jpg">
      <meta itemprop="name" content="Txing">
      <meta itemprop="description" content="泛用人形决战型机器人博士">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Txing">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/20/2021-05-20-%E5%AE%89%E8%A3%85Atari%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3%E6%8A%A5%E9%94%99/" class="post-title-link" itemprop="url">安装Atari环境报错缺少ale_c.dll解决办法</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-20 00:00:00" itemprop="dateCreated datePublished" datetime="2021-05-20T00:00:00+08:00">2021-05-20</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2
id="安装atari环境报错缺少ale_c.dll解决办法">安装Atari环境报错缺少ale_c.dll解决办法</h2>
<h3 id="背景"><strong>背景：</strong></h3>
<p>在Atari游戏环境中做RL测试。通过anaconda新建了环境，配置好torch，numpy，gym等环境。运行中报错如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FileNotFoundError: Could not find module &#x27;D:\Anaconda3\envs\PPOenv\lib\site-packages\atari_py\ale_interface\ale_c.dll&#x27; (or one of its dependencies). Try using the full path with constructor syntax.</span><br></pre></td></tr></table></figure>
<p>意思是所显示路径下缺少ale_c.dll</p>
<h3 id="处理方法"><strong>处理方法：</strong></h3>
<h4
id="方法1对我情况无效但点赞很多">方法1（对我情况无效，但点赞很多）</h4>
<p>首先检索到了这个方案（作者@razzzu）</p>
<p>https://github.com/openai/gym/issues/1726</p>
<p><strong>Step1:</strong> 卸载相关库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall atari-py</span><br><span class="line">pip uninstall gym[atari]</span><br></pre></td></tr></table></figure>
<p><strong>Step2:</strong> 安装 VS build tools工具</p>
<p>Download VS build tools here:
https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=BuildTools&amp;rel=16</p>
<p>运行后勾选左侧“C++ build tools”以及右侧的</p>
<ul>
<li>MSVC v142-VS 2019 C++ x64/x86 build tools</li>
<li>windows 10 SDK</li>
<li>C++ CMaKer</li>
<li>Testing tools core features - build tools</li>
</ul>
<p><strong>Step3:</strong> 重启电脑</p>
<p><strong>Step4:</strong> 重新安装库</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Install cmake, atari-py and gym</span><br><span class="line">pip install cmake</span><br><span class="line">pip install atari-py</span><br><span class="line">pip install gym[atari]</span><br></pre></td></tr></table></figure>
<p>Step5: 运行测试</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Now run the following code:</span><br><span class="line"><span class="keyword">import</span> atari_py</span><br><span class="line"><span class="built_in">print</span>(atari_py.list_games())</span><br></pre></td></tr></table></figure>
<p>and if everything worked then it should return a list of all games as
shown below</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;adventure&#x27;</span>, <span class="string">&#x27;air_raid&#x27;</span>, <span class="string">&#x27;alien&#x27;</span>, <span class="string">&#x27;amidar&#x27;</span>, <span class="string">&#x27;assault&#x27;</span>, <span class="string">&#x27;asterix&#x27;</span>, <span class="string">&#x27;asteroids&#x27;</span>, <span class="string">&#x27;atlantis&#x27;</span>, <span class="string">&#x27;bank_heist&#x27;</span>, <span class="string">&#x27;battle_zone&#x27;</span>, <span class="string">&#x27;beam_rider&#x27;</span>, <span class="string">&#x27;berzerk&#x27;</span>, <span class="string">&#x27;bowling&#x27;</span>, <span class="string">&#x27;boxing&#x27;</span>, <span class="string">&#x27;breakout&#x27;</span>, <span class="string">&#x27;carnival&#x27;</span>, <span class="string">&#x27;centipede&#x27;</span>, <span class="string">&#x27;chopper_command&#x27;</span>, <span class="string">&#x27;crazy_climber&#x27;</span>, <span class="string">&#x27;defender&#x27;</span>, <span class="string">&#x27;demon_attack&#x27;</span>, <span class="string">&#x27;double_dunk&#x27;</span>, <span class="string">&#x27;elevator_action&#x27;</span>, <span class="string">&#x27;enduro&#x27;</span>, <span class="string">&#x27;fishing_derby&#x27;</span>, <span class="string">&#x27;freeway&#x27;</span>, <span class="string">&#x27;frostbite&#x27;</span>, <span class="string">&#x27;gopher&#x27;</span>, <span class="string">&#x27;gravitar&#x27;</span>, <span class="string">&#x27;hero&#x27;</span>, <span class="string">&#x27;ice_hockey&#x27;</span>, <span class="string">&#x27;jamesbond&#x27;</span>, <span class="string">&#x27;journey_escape&#x27;</span>, <span class="string">&#x27;kaboom&#x27;</span>, <span class="string">&#x27;kangaroo&#x27;</span>, <span class="string">&#x27;krull&#x27;</span>, <span class="string">&#x27;kung_fu_master&#x27;</span>, <span class="string">&#x27;montezuma_revenge&#x27;</span>, <span class="string">&#x27;ms_pacman&#x27;</span>, <span class="string">&#x27;name_this_game&#x27;</span>, <span class="string">&#x27;phoenix&#x27;</span>, <span class="string">&#x27;pitfall&#x27;</span>, <span class="string">&#x27;pong&#x27;</span>, <span class="string">&#x27;pooyan&#x27;</span>, <span class="string">&#x27;private_eye&#x27;</span>, <span class="string">&#x27;qbert&#x27;</span>, <span class="string">&#x27;riverraid&#x27;</span>, <span class="string">&#x27;road_runner&#x27;</span>, <span class="string">&#x27;robotank&#x27;</span>, <span class="string">&#x27;seaquest&#x27;</span>, <span class="string">&#x27;skiing&#x27;</span>, <span class="string">&#x27;solaris&#x27;</span>, <span class="string">&#x27;space_invaders&#x27;</span>, <span class="string">&#x27;star_gunner&#x27;</span>, <span class="string">&#x27;tennis&#x27;</span>, <span class="string">&#x27;time_pilot&#x27;</span>, <span class="string">&#x27;tutankham&#x27;</span>, <span class="string">&#x27;up_n_down&#x27;</span>, <span class="string">&#x27;venture&#x27;</span>, <span class="string">&#x27;video_pinball&#x27;</span>, <span class="string">&#x27;wizard_of_wor&#x27;</span>, <span class="string">&#x27;yars_revenge&#x27;</span>, <span class="string">&#x27;zaxxon&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>我在完成上述步骤后发现还是缺少ale_c.dll，于是打算直接下载一个ale_c.dll</p>
<h4 id="方法2-有效">方法2 （有效）</h4>
<p>根据<a
target="_blank" rel="noopener" href="https://stackoverflow.com/questions/63080326/could-not-find-module-atari-py-ale-interface-ale-c-dll-or-one-of-its-dependenc/64104353#64104353">stackoverflow上的方法</a></p>
<p><strong>Step1:</strong> Download ale_c.dll from <a
target="_blank" rel="noopener" href="https://drive.google.com/file/d/1WQrEBliYbASwNDyyVIlPFSZHRwAa7sPp/view?usp=sharing">here</a>.(下载需要梯子，我在博客img中放了文件备份)
<strong>Step2:</strong> Copy it in C:Raval-packages_py_interface (Your
path can be different).</p>
<p>成功解决问题！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/30/">30</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Txing"
      src="/images/my_photo.jpg">
  <p class="site-author-name" itemprop="name">Txing</p>
  <div class="site-description" itemprop="description">泛用人形决战型机器人博士</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">233</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">58</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/txing-casia" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;txing-casia" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://blog.uomi.moe/" title="https:&#x2F;&#x2F;blog.uomi.moe" rel="noopener" target="_blank">驱逐舰患者</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://m.mepai.me/photographyer/u_5a68085ba15aa.html?tdsourcetag=s_pctim_aiomsg" title="https:&#x2F;&#x2F;m.mepai.me&#x2F;photographyer&#x2F;u_5a68085ba15aa.html?tdsourcetag&#x3D;s_pctim_aiomsg" rel="noopener" target="_blank">隐之-INF</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2018 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Txing</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">568k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">8:36</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

</body>
</html>
